<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>考研数据库 | Lucyの部落</title><meta name="author" content="Lucy"><meta name="copyright" content="Lucy"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="第三章 关系数据库关系模型概述关系数据结构 关系数据模型源于数学。 用二维表来组织数据，这个二维表在关系数据库中就称为关系。 关系数据库就是表或者说是关系的集合。 关系系统要求让用户所感觉的数据库就是一张张表。 在关系系统中，表是逻辑结构而不是物理结构。  关系操作传统的关系运算 并（Union）  交（Intersection）  差（Difference）  广义笛卡尔乘积（Extended">
<meta property="og:type" content="article">
<meta property="og:title" content="考研数据库">
<meta property="og:url" content="http://lucy23.blog/articles/7de3dde6.html">
<meta property="og:site_name" content="Lucyの部落">
<meta property="og:description" content="第三章 关系数据库关系模型概述关系数据结构 关系数据模型源于数学。 用二维表来组织数据，这个二维表在关系数据库中就称为关系。 关系数据库就是表或者说是关系的集合。 关系系统要求让用户所感觉的数据库就是一张张表。 在关系系统中，表是逻辑结构而不是物理结构。  关系操作传统的关系运算 并（Union）  交（Intersection）  差（Difference）  广义笛卡尔乘积（Extended">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2025-02-28T04:13:05.000Z">
<meta property="article:modified_time" content="2025-03-05T07:41:21.451Z">
<meta property="article:author" content="Lucy">
<meta property="article:tag" content="Lucy的博客">
<meta name="twitter:card" content="summary"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://lucy23.blog/articles/7de3dde6"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '考研数据库',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-03-05 15:41:21'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/cat.css"><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/universe.css"><link rel="stylesheet" href="/css/myStyle.css"><div id="myscoll"></div><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">Loading...</div></div></div><script>const preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> { preloader.endLoading() })

if (false) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/cat-tou2.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">31</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">28</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">10</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Lucyの部落</a></span><div id="he-plugin-simple"></div><div id="none_space"></div><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">考研数据库</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2025-02-28T04:13:05.000Z" title="Created 2025-02-28 12:13:05">2025-02-28</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-03-05T07:41:21.451Z" title="Updated 2025-03-05 15:41:21">2025-03-05</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="考研数据库"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="第三章-关系数据库"><a href="#第三章-关系数据库" class="headerlink" title="第三章 关系数据库"></a>第三章 关系数据库</h1><h2 id="关系模型概述"><a href="#关系模型概述" class="headerlink" title="关系模型概述"></a>关系模型概述</h2><h3 id="关系数据结构"><a href="#关系数据结构" class="headerlink" title="关系数据结构"></a>关系数据结构</h3><ul>
<li>关系数据<u>模型</u>源于<u>数学</u>。</li>
<li>用<strong>二维表</strong>来组织数据，这个二维表在关系数据库中就称为<strong>关系</strong>。</li>
<li>关系数据库就是<u><strong>表</strong>或者说是<strong>关系</strong></u>的<strong>集合</strong>。</li>
<li>关系系统要求让用户所感觉的数据库就是<u>一张张表</u>。</li>
<li>在关系系统中，表是<strong>逻辑结构</strong>而不是物理结构。</li>
</ul>
<h3 id="关系操作"><a href="#关系操作" class="headerlink" title="关系操作"></a>关系操作</h3><h4 id="传统的关系运算"><a href="#传统的关系运算" class="headerlink" title="传统的关系运算"></a>传统的关系运算</h4><ul>
<li><p><strong>并（Union）</strong></p>
</li>
<li><p><strong>交（Intersection）</strong></p>
</li>
<li><p><strong>差（Difference）</strong></p>
</li>
<li><p><strong>广义笛卡尔乘积（Extended Cartesian Product）</strong></p>
</li>
</ul>
<h4 id="专门的关系运算"><a href="#专门的关系运算" class="headerlink" title="专门的关系运算"></a>专门的关系运算</h4><ul>
<li><strong>选择（Select）</strong></li>
<li><strong>投影（Project）</strong></li>
<li><strong>连接（Join）</strong></li>
<li><strong>除（Divide）</strong></li>
</ul>
<h3 id="关系模型的数据操作"><a href="#关系模型的数据操作" class="headerlink" title="关系模型的数据操作"></a>关系模型的数据操作</h3><ul>
<li>主要包括：<u><strong>查询</strong>、<strong>插入</strong>、<strong>删除</strong>和<strong>修改</strong>数据</u>。</li>
<li>是基于<strong>集合</strong>的操作，操作对象和操作结果都是<strong>集合（或关系）</strong>。</li>
<li>是<strong>非过程化</strong>的。 <blockquote>
<p>关系模型的数据操作<strong>非过程化</strong>是指在关系型数据库管理系统（RDBMS）中进行数据操作时，<strong>用户无需关心数据操作的具体实现过程，而只需要描述需要操作的数据和所期望的结果。</strong>这种方式与过程化操作（例如编写详细的操作步骤和控制流）有所不同，强调的是“做什么”而不是“如何做”。</p>
</blockquote>
</li>
</ul>
<h3 id="数据完整性约束"><a href="#数据完整性约束" class="headerlink" title="数据完整性约束"></a>数据完整性约束</h3><ul>
<li>数据完整性是指<u>数据库中存储的<strong>数据</strong>是<strong>有意义的</strong>或<strong>正确的</strong></u>。</li>
<li>主要包括三大类：<ul>
<li><strong>实体完整性</strong></li>
<li><strong>参照完整性</strong></li>
<li><strong>用户定义的完整性</strong></li>
</ul>
</li>
</ul>
<h2 id="关系数据模型的基本术语与形式化定义"><a href="#关系数据模型的基本术语与形式化定义" class="headerlink" title="关系数据模型的基本术语与形式化定义"></a>关系数据模型的基本术语与形式化定义</h2><h3 id="关系数据模型的基本术语"><a href="#关系数据模型的基本术语" class="headerlink" title="关系数据模型的基本术语"></a>关系数据模型的基本术语</h3><ul>
<li><strong>关系：</strong>关系就是二维表。并满足如下性质：<ul>
<li>关系表中的每一列都是<u>不可再分</u>的基本属性；</li>
<li>表中的<u>行、列次序并不重要</u>。</li>
</ul>
</li>
<li><strong>属性：</strong>表中的每一<u>列</u>是一个属性值集，列可以命名，称为属性名。</li>
<li><strong>值域：</strong>属性的取值范围 。如，性别只能是‘男’和‘女’两个值。</li>
<li><strong>元组：</strong>表中的每一<u>行</u>称作是一个元组，它相当于一个记录值。</li>
<li><strong>分量：</strong>元组中的每一个<u>属性值</u>称为元组的一个分量，n元关系的每个元组有n个分量。</li>
<li><strong>关系模式：</strong>关系模式是<u><strong>关系的“型”</strong></u>或<u><strong>元组的结构共性的描述</strong></u>。关系模式实际上对应关系表的表头。设关系名为R，属性分别为A1，A2，…，An，则关系模式可以表示为：R（A1，A2，…，An） </li>
<li><strong>关系数据库：</strong>对应于一个<u>关系模型</u>的<u>所有关系的集合</u>称为关系数据库。</li>
<li><strong>候选码：</strong>能够唯一标识关系中的一个元组的<u><strong>一个属性</strong>或<strong>最小属性组</strong></u>。 </li>
<li><strong>主码：</strong>指定候选码中的一个作为主码。</li>
<li><strong>主属性：</strong>包含在任一候选码中的属性称为是主属性。</li>
<li><strong>非主属性：</strong>不包含在任一候选码中的属性称为是非主属性。</li>
<li><strong>外码：</strong>如果某个属性不一定是所在关系的码，但是其他关系的码，则称该属性为外码。</li>
</ul>
<h3 id="关系数据结构及其形式化定义"><a href="#关系数据结构及其形式化定义" class="headerlink" title="关系数据结构及其形式化定义"></a>关系数据结构及其形式化定义</h3><ol>
<li><strong>关系的形式化定义</strong></li>
</ol>
<ul>
<li><p><strong>笛卡尔积：</strong>设<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>D</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>D</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">D_1, D_2, \cdots, D_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>为任意集合，定义笛卡尔积<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>D</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>D</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">D_1, D_2, \cdots, D_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>为：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mn>1</mn></msub><mo>×</mo><msub><mi>D</mi><mn>2</mn></msub><mo>×</mo><mo>…</mo><mo>×</mo><msub><mi>D</mi><mi>n</mi></msub><mo>=</mo><mrow><mo stretchy="false">(</mo><msub><mi>d</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>d</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>d</mi><mi>n</mi></msub><mo stretchy="false">)</mo><mi mathvariant="normal">∣</mi><msub><mi>d</mi><mi>i</mi></msub><mo>∈</mo><msub><mi>D</mi><mi>i</mi></msub><mo separator="true">,</mo><mi>i</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><mi>n</mi></mrow></mrow><annotation encoding="application/x-tex">D_1 × D_2 × … × D_n = {(d_1, d_2, \cdots, d_n) | d_i ∈ D_i, i = 1, 2, \cdots, n }</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span></span></span></span></span> 其中每一个元素<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>d</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>d</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>d</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(d_1,d_2, \cdots, d_n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>称为一个n元组，简称元组。元组中每一个<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">d_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>称为是一个分量。 </p>
  <img src="/articles/7de3dde6/Cartesian.png" width=70% height=70% /></li>
<li><p>笛卡尔积<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>D</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>D</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">D_1, D_2, \cdots, D_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的任意一个子集称为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>D</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>D</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">D_1, D_2, \cdots, D_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>上的一个n元关系。</p>
<blockquote>
<p>首先，笛卡尔积是指两个或多个集合之间的运算。给定集合 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>𝐷</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>𝐷</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>𝐷</mi><mi>𝑛</mi></msub></mrow><annotation encoding="application/x-tex">𝐷_1, 𝐷_2, \cdots, 𝐷_𝑛</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> ，它们的笛卡尔积表示的是所有可能的有序元组，每个元组的第 𝑖 个元素来自于集合 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>𝐷</mi><mi>𝑖</mi></msub></mrow><annotation encoding="application/x-tex">𝐷_𝑖</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 。数学上，笛卡尔积可以表示为：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>𝐷</mi><mn>1</mn></msub><mo>×</mo><msub><mi>𝐷</mi><mn>2</mn></msub><mo>×</mo><mo>⋯</mo><mo>×</mo><msub><mi>𝐷</mi><mi>𝑛</mi></msub><mo>=</mo><mo stretchy="false">{</mo><mo stretchy="false">(</mo><msub><mi>𝑑</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>𝑑</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>𝑑</mi><mi>𝑛</mi></msub><mo stretchy="false">)</mo><mo>∣</mo><msub><mi>𝑑</mi><mi>𝑖</mi></msub><mo>∈</mo><msub><mi>𝐷</mi><mi>𝑖</mi></msub><mo separator="true">,</mo><mi mathvariant="normal">∀</mi><mi>𝑖</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">𝐷_1 × 𝐷_2 × \cdots × 𝐷_𝑛 = \{(𝑑_1, 𝑑_2, \cdots, 𝑑_𝑛)∣𝑑_𝑖 ∈ 𝐷_𝑖, ∀𝑖\} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{(</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">∀</span><span class="mord mathnormal">i</span><span class="mclose">}</span></span></span></span> .  例如，如果<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mn>1</mn></msub><mo>=</mo><mo stretchy="false">{</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo stretchy="false">}</mo><mo separator="true">,</mo><msub><mi>D</mi><mn>2</mn></msub><mo>=</mo><mo stretchy="false">{</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">D_1 = \{1,2\}, D_2 = \{a, b\} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mclose">}</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">}</span></span></span></span>，那么它们的笛卡尔积就是所有可能的有序元组：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mn>1</mn></msub><mo>×</mo><msub><mi>D</mi><mn>2</mn></msub><mo>=</mo><mo stretchy="false">{</mo><mo stretchy="false">(</mo><mn>1</mn><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mo stretchy="false">(</mo><mn>1</mn><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mo stretchy="false">(</mo><mn>2</mn><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mo stretchy="false">(</mo><mn>2</mn><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">D_1 × D_2 = \{(1,a),(1,b),(2,a),(2,b)\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{(</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">)}</span></span></span></span>.<br>一个n元关系是指从一个笛卡尔积中选出的一个子集。例如，在上面的笛卡尔积中，一个子集如<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mo stretchy="false">(</mo><mn>1</mn><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mo stretchy="false">(</mo><mn>2</mn><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{(1,a),(2,b)\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{(</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">)}</span></span></span></span>就是一个2元关系，表示了来自集合 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">D_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">D_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 的某些特定组合。</p>
</blockquote>
</li>
<li><p>形式化的关系定义同样可以把关系看成二维表，给表的每个列取一个名字，称为属性。</p>
</li>
<li><p>n元关系有n个属性，一个关系中的属性的名字必须是唯一的。</p>
</li>
<li><p>属性<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">D_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的取值范围（i＝1，2，…，n）称为该属性的值域（domain）。 </p>
</li>
<li><p>从集合论的观点也可以将关系定义为：关系是一个有K个属性的元组的集合。</p>
</li>
</ul>
<ol start="2">
<li>对关系的限定</li>
</ol>
<ul>
<li>关系中的每个分量都必须是<u>不可再分</u>的最小数据项。 </li>
<li>表中列的数据类型是固定的，即<u>每个列</u>中的分量是<u>同类项</u>的数据，来自相同的值域。 </li>
<li><u>不同的列的数据可以取自相同的值域</u>，每个列称为一个属性，每个属性有不同的属性名。 </li>
<li>关系表中行、列的顺序不重要 。</li>
<li><strong>同一个关系中元组不能重复</strong>。</li>
</ul>
<h2 id="关系模型的完整性约束"><a href="#关系模型的完整性约束" class="headerlink" title="关系模型的完整性约束"></a>关系模型的完整性约束</h2><h3 id="实体完整性"><a href="#实体完整性" class="headerlink" title="实体完整性"></a>实体完整性</h3><ul>
<li>实体完整性是保证关系中的<strong>每个元组</strong>都是<strong>可识别的</strong>和<strong>唯一的</strong>。 </li>
<li>而且表中不允许存在如下的记录：<ul>
<li><strong>无主码值</strong>的记录</li>
<li><strong>主码值相同</strong>的记录</li>
</ul>
</li>
</ul>
<h3 id="参照完整性"><a href="#参照完整性" class="headerlink" title="参照完整性"></a>参照完整性</h3><ul>
<li><p>用于描述<strong>实体</strong>之间的联系。</p>
<blockquote>
<p><strong>实体与表：</strong>在关系型数据库中，<strong>表</strong>用来存储<strong>实体</strong>的<strong>实例</strong>，表中的每一行是实体的一个实例（例如一个学生），每一列是实体的一个属性（例如学生的姓名、学号等）。<br><strong>在很多情况下，一个实体可以被映射为一张表，</strong>这种映射关系是数据库设计中的常见做法。具体来说：</p>
</blockquote>
<ul>
<li>实体的每个属性通常对应表中的一个字段（列）。</li>
<li>实体的每个实例通常对应表中的一行（记录）。</li>
<li>实体的主键通常对应表中的唯一标识字段（通常是主键）。</li>
</ul>
</li>
<li><p>参照完整性一般是指多个实体（表）之间的关联关系。 </p>
</li>
<li><p>一般用<u>外码</u>实现。</p>
</li>
<li><p><strong>外码：</strong>取作本表（子表）属性之一的外表（父表，主表）主码。</p>
</li>
<li><p><strong>主码值先在主表中生成，后在子表中引用。</strong></p>
</li>
<li><p><strong>外码引用例：</strong></p>
<img src="/articles/7de3dde6/waima1.png" width=70% height=70% />
<img src="/articles/7de3dde6/waima2.png" width=70% height=70% />
<img src="/articles/7de3dde6/waima3.png" width=70% height=70% />
</li>
<li><p>参照完整性规则就是定义外码与主码之间的引用规则。</p>
</li>
<li><p>对于外码，一般应符合如下要求：</p>
<ul>
<li>或者值为空；</li>
<li>或者等于其所应用的关系中的某个元组的主码值。</li>
</ul>
</li>
</ul>
<h3 id="用户定义的完整性"><a href="#用户定义的完整性" class="headerlink" title="用户定义的完整性"></a>用户定义的完整性</h3><ul>
<li>按<u>应用语义</u>，属性数据有：<ul>
<li>类型与长度限制：方便计算机操作</li>
<li>取值范围限制：<u>防止属性值与应用语义矛盾</u></li>
<li><strong>语义许可取值范围约束例：</strong><ul>
<li>成绩取<ol>
<li>[0 .. 100],</li>
<li>{优、良、中、及格、不及格}</li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="关系代数"><a href="#关系代数" class="headerlink" title="关系代数"></a>关系代数</h2><ul>
<li>关系模型源于数学，关系是由元组构成的集合，可以通过关系的运算来表达查询要求。</li>
<li>关系代数是关系操作语言的一种传统的表示方式，它是一种抽象的查询语言。</li>
<li>关系代数的运算可分为两大类：<ul>
<li>传统的集合运算：广义笛卡尔积运算、并、交和差运算。</li>
<li>专门的关系运算：选择、投影、连接和除运算。</li>
</ul>
</li>
</ul>
<h3 id="关系运算符"><a href="#关系运算符" class="headerlink" title="关系运算符"></a>关系运算符</h3><img src="/articles/7de3dde6/关系运算符1.png" width=70% height=70% /> 
<img src="/articles/7de3dde6/关系运算符2.png" width=70% height=70% /> 

<h3 id="传统的集合运算"><a href="#传统的集合运算" class="headerlink" title="传统的集合运算"></a>传统的集合运算</h3><ul>
<li><p>传统的集合运算是二目运算，</p>
<blockquote>
<p><strong>二目运算</strong>指的是一个操作需要两个输入值的运算，这些输入值可以是数字、布尔值或其他类型的数据。</p>
</blockquote>
</li>
<li><p>设关系R和S均是n元关系，且<strong>相应的属性值取自同一个值域</strong>，则可以定义三种运算：</p>
<ul>
<li><strong>并运算（∪）</strong><ul>
<li>关系R与关系S的并记为：<ul>
<li>R∪S＝{t | t∈R ∨t∈S }</li>
</ul>
</li>
<li>其结果仍是n目关系，由属于R或属于S的元组组成。 <img src="/articles/7de3dde6/并运算.png" width=70% height=70% /></li>
</ul>
</li>
<li><strong>交运算（∩）</strong><ul>
<li>关系R与关系S的交记为：<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>∩</mo><mi>S</mi><mtext>＝</mtext><mo stretchy="false">{</mo><mtext> </mtext><mi>t</mi><mtext> </mtext><mi mathvariant="normal">∣</mi><mtext> </mtext><mi>t</mi><mo>∈</mo><mi>R</mi><mtext> </mtext><mtext>  </mtext><mo>∧</mo><mtext> </mtext><mi>t</mi><mo>∈</mo><mi>S</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">R ∩ S ＝ \{ \, t \, | \, t ∈ R \,\; ∧ \, t ∈ S \} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord cjk_fallback">＝</span><span class="mopen">{</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">∣</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6542em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mclose">}</span></span></span></span></li>
</ul>
</li>
<li>其结果仍是n目关系，由属于R并且也属于S的元组组成。 <img src="/articles/7de3dde6/交运算.png" width=70% height=70% /></li>
</ul>
</li>
<li><strong>差运算（―）</strong><ul>
<li>关系R与关系S的差记为：<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mtext>－</mtext><mi>S</mi><mtext>＝</mtext><mo stretchy="false">{</mo><mtext> </mtext><mi>t</mi><mtext> </mtext><mi mathvariant="normal">∣</mi><mtext> </mtext><mi>t</mi><mo>∈</mo><mi>R</mi><mtext> </mtext><mtext>  </mtext><mo>∧</mo><mtext> </mtext><mi>t</mi><mo mathvariant="normal">∉</mo><mi>S</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">R － S ＝ \{ \, t \, | \, t ∈ R \,\; ∧ \, t \notin S\}  </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord cjk_fallback">－</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord cjk_fallback">＝</span><span class="mopen">{</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">∣</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mord"><span class="mrel">∈</span></span><span class="mord vbox"><span class="thinbox"><span class="llap"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="inner"><span class="mord"><span class="mord">/</span><span class="mspace" style="margin-right:0.0556em;"></span></span></span><span class="fix"></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mclose">}</span></span></span></span></li>
</ul>
</li>
<li>其结果仍是n目关系，由属于R但不属于S的元组组成。 <img src="/articles/7de3dde6/差运算.png" width=70% height=70% /></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>广义笛卡尔积</strong></p>
<ul>
<li>两个分别为n目和m目的关系R和关系S的广义笛卡尔积是一个（m＋n）列的元组的集合。</li>
<li>元组的前n个列是关系R的一个元组，后m个列是关系S的一个元组。</li>
<li>若R有K1个元组，S有K2个元组，则关系R和关系S的广义笛卡尔积有K1×K2个元组，记做：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>×</mo><mi>S</mi><mtext>＝</mtext><mo stretchy="false">{</mo><msub><mi>t</mi><mi>r</mi></msub><mtext>^</mtext><msub><mi>t</mi><mi>s</mi></msub><mi mathvariant="normal">∣</mi><msub><mi>t</mi><mi>r</mi></msub><mo>∈</mo><mi>R</mi><mo>∧</mo><msub><mi>t</mi><mi>s</mi></msub><mo>∈</mo><mi>S</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">R × S ＝ \{t_r \text{\textasciicircum} t_s | t_r \in R ∧ t_s \in S \}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord cjk_fallback">＝</span><span class="mopen">{</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord text"><span class="mord">^</span></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7651em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mclose">}</span></span></span></span> 
<blockquote>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mi>r</mi></msub><mtext>^</mtext><msub><mi>t</mi><mi>s</mi></msub></mrow><annotation encoding="application/x-tex">t_r \text{\textasciicircum} t_s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord text"><span class="mord">^</span></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>表示由两个元组<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mi>r</mi></msub></mrow><annotation encoding="application/x-tex">t_r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7651em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>和<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mi>s</mi></msub></mrow><annotation encoding="application/x-tex">t_s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7651em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>前后有序连接而成的一个元组。</blockquote>
</li>
</ul>
<img src="/articles/7de3dde6/广义笛卡尔积.png" width=70% height=70% /></li>
</ul>
<h3 id="专门的关系运算-1"><a href="#专门的关系运算-1" class="headerlink" title="专门的关系运算"></a>专门的关系运算</h3><ul>
<li>专门的关系运算包括：<u>选择</u>、<u>投影、连接和除</u>等操作，其中第一个为一元操作，后三者为二元操作。</li>
</ul>
<h4 id="选择"><a href="#选择" class="headerlink" title="选择"></a>选择</h4><ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>σ</mi><mi>F</mi></msub><mtext>（</mtext><mi>R</mi><mtext>）＝</mtext><mo stretchy="false">{</mo><mi>r</mi><mi mathvariant="normal">∣</mi><mi>r</mi><mo>∈</mo><mi>R</mi><mo>∧</mo><mi>F</mi><mtext>（</mtext><mi>t</mi><mtext>）＝‘真’</mtext><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">σ_{F}（R）＝ \{ r | r∈R ∧ F（t）＝‘真’ \} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">F</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord cjk_fallback">（</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord cjk_fallback">）＝</span><span class="mopen">{</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mord cjk_fallback">（</span><span class="mord mathnormal">t</span><span class="mord cjk_fallback">）＝</span><span class="mord">‘</span><span class="mord cjk_fallback">真</span><span class="mord">’</span><span class="mclose">}</span></span></span></span></li>
<li>其中：σ是选择运算符，R是关系名，r是元组，F是逻辑表达式，取逻辑“真”值或“假”值。</li>
<li>例，选择系为计算机系的学生信息：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>σ</mi><mrow><mi>S</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi><mtext>＝‘计算机系’</mtext></mrow></msub><mtext>（学生表）</mtext></mrow><annotation encoding="application/x-tex">σ_{Sdept＝‘计算机系’}（学生表）</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">pt</span><span class="mord cjk_fallback mtight">＝</span><span class="mord mtight">‘</span><span class="mord cjk_fallback mtight">计算机系</span><span class="mord mtight">’</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mord cjk_fallback">（学生表）</span></span></span></span></li>
</ul>
<h4 id="投影"><a href="#投影" class="headerlink" title="投影"></a>投影</h4><ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mo>∏</mo><mi>A</mi></msub><mtext>（</mtext><mi>R</mi><mtext>）＝</mtext><mo stretchy="false">{</mo><mi>r</mi><mi mathvariant="normal">.</mi><mi>A</mi><mi mathvariant="normal">∣</mi><mi>r</mi><mo>∈</mo><mi>R</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">∏_A（R）＝ \{ r.A | r∈R \} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0497em;vertical-align:-0.2997em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∏</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1786em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">（</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord cjk_fallback">）＝</span><span class="mopen">{</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord">.</span><span class="mord mathnormal">A</span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">}</span></span></span></span></li>
<li>其中：<ul>
<li>∏是投影运算符，</li>
<li>R是关系名，</li>
<li>A是被投影的属性或属性组。</li>
<li>r.A表示r这个元组中相应于属性（集）A的分量，也可以表示为r[A]。</li>
</ul>
</li>
<li>例如，选择sname，sdept两个列构成新关系：<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mo>∏</mo><mrow><mi>s</mi><mi>n</mi><mi>a</mi><mi>m</mi><mi>e</mi><mo separator="true">,</mo><mi>s</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi></mrow></msub><mtext>（</mtext><mi>S</mi><mi>t</mi><mi>u</mi><mi>d</mi><mi>e</mi><mi>n</mi><mi>t</mi><mtext>）</mtext></mrow><annotation encoding="application/x-tex">∏_{sname, sdept}（Student） </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1858em;vertical-align:-0.4358em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∏</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1864em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">nam</span><span class="mord mathnormal mtight">e</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">pt</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4358em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">（</span><span class="mord mathnormal">St</span><span class="mord mathnormal">u</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mord cjk_fallback">）</span></span></span></span></li>
</ul>
</li>
</ul>
<h4 id="连接"><a href="#连接" class="headerlink" title="连接"></a>连接</h4><ul>
<li><p>其中：</p>
<ul>
<li>A和B分别是关系R和S上可比的属性组，</li>
<li>θ是比较运算符，</li>
<li>连接运算从R和S的广义笛卡尔积R×S中选择（R关系）在A属性组上的值与（S关系）在B属性组上值满足比较运算符θ的元组。 <img src="/articles/7de3dde6/连接.png" width=70% height=70% /></li>
</ul>
</li>
<li><p><strong>等值连接</strong></p>
<ul>
<li>当θ为“＝”时的连接为等值连接，</li>
<li>是从关系R与关系S的广义笛卡尔积中选取A，B属性值相等的那些元组。 <img src="/articles/7de3dde6/等值连接.png" width=70% height=70% /></li>
</ul>
</li>
<li><p><strong>自然连接</strong></p>
<ul>
<li>自然连接去掉结果中的重复列。</li>
<li>自然连接与等值连接的差别为：<ul>
<li>自然连接要求相等的分量必须有共同的属性名，等值连接则不要求；</li>
<li>自然连接要求把重复的属性名去掉，等值连接却不这样做。  <img src="/articles/7de3dde6/自然连接.png" width=70% height=70% /></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>除（Division）</strong></p>
<img src="/articles/7de3dde6/除示例.png" width=70% height=70% />

<ul>
<li><strong>（1）除法的简单形式</strong><ul>
<li>设关系S的属性是关系R的属性的一部分，则R÷S为这样一个关系：</li>
<li>此关系的属性是由属于R但不属于S的所有属性组成；</li>
<li>R÷S的任一元组都是R中某元组的一部分。但必须符合下列要求，即任取属于R÷S的一个元组t，则t与S的任一元组连接后，都为R中原有的一个元组。</li>
</ul>
</li>
<li><strong>（2）除法的一般形式</strong><ul>
<li>设有关系R（X，Y）和S（Y，Z），其中X、Y、Z为关系的属性组，则：<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mtext>（</mtext><mi>X</mi><mo separator="true">,</mo><mi>Y</mi><mtext>）</mtext><mo>÷</mo><mi>S</mi><mtext>（</mtext><mi>Y</mi><mo separator="true">,</mo><mi>Z</mi><mtext>）＝</mtext><mi>R</mi><mtext>（</mtext><mi>X</mi><mo separator="true">,</mo><mi>Y</mi><mtext>）</mtext><mo>÷</mo><msub><mo>∏</mo><mi>Y</mi></msub><mtext>（</mtext><mi>S</mi><mtext>）</mtext></mrow><annotation encoding="application/x-tex">R（X,Y）÷ S（Y,Z）＝R（X,Y）÷ ∏_Y（S） </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord cjk_fallback">（</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mord cjk_fallback">）</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">÷</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord cjk_fallback">（</span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">Z</span><span class="mord cjk_fallback">）＝</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord cjk_fallback">（</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mord cjk_fallback">）</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">÷</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0497em;vertical-align:-0.2997em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∏</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1786em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">（</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord cjk_fallback">）</span></span></span></span></li>
</ul>
</li>
</ul>
</li>
<li><strong>象集：</strong>给定一个关系R（X，Y），X和Y为属性组。定义，当t［X］＝x时，x在R中的象集为：<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Y</mi><mi>x</mi></msub><mo>=</mo><mo stretchy="false">{</mo><mi>t</mi><mo stretchy="false">[</mo><mi>Y</mi><mo stretchy="false">]</mo><mi mathvariant="normal">∣</mi><mi>t</mi><mo>∈</mo><mi>R</mi><mo>∧</mo><mi>t</mi><mo stretchy="false">[</mo><mi>X</mi><mo stretchy="false">]</mo><mo>=</mo><mi>x</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">Y_x =\{ t[Y] | t \in R ∧ t[X]=x \} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">t</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mclose">]</span><span class="mord">∣</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">t</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">x</span><span class="mclose">}</span></span></span></span></li>
<li>上式中：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo stretchy="false">[</mo><mi>Y</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">t[Y] </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">t</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mclose">]</span></span></span></span> 和<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo stretchy="false">[</mo><mi>X</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">t[X] </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">t</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mclose">]</span></span></span></span>分别表示R中的元组t 在属性组Y和X上的分量的集合。</li>
</ul>
</li>
<li><strong>除法的一般形式：</strong></li>
<li>设有关系R（X，Y）和S（Y，Z），其中X、Y、Z为关系的属性组，则：<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>÷</mo><mi>S</mi><mtext>＝</mtext><mo stretchy="false">{</mo><msub><mi>t</mi><mi>r</mi></msub><mo stretchy="false">[</mo><mi>X</mi><mo stretchy="false">]</mo><mi mathvariant="normal">∣</mi><msub><mi>t</mi><mi>r</mi></msub><mo>∈</mo><mi>R</mi><mo>∧</mo><msub><mo>∏</mo><mi>Y</mi></msub><mo stretchy="false">(</mo><mi>S</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>Y</mi><mi>x</mi></msub><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">R÷S＝ \{t_r[X] | t_{r} \in R ∧ ∏_{Y}(S) = Y_x \} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">÷</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord cjk_fallback">＝</span><span class="mopen">{</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mclose">]</span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0497em;vertical-align:-0.2997em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∏</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1786em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">}</span></span></span></span></li>
</ul>
</li>
</ul>
</li>
<li><p>查询修c02号课程的学生的学号和成绩。</p>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mo>∏</mo><mrow><mi>s</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>g</mi><mi>r</mi><mi>a</mi><mi>d</mi><mi>e</mi></mrow></msub><mo stretchy="false">(</mo><msub><mi>σ</mi><mrow><mi>c</mi><mi>n</mi><mi>o</mi><mo>=</mo><mtext>‘</mtext><mi>c</mi><mn>02</mn><mtext>’</mtext></mrow></msub><mo stretchy="false">(</mo><mi>S</mi><mi>C</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">∏_{sno, grade}(σ_{cno=‘c02’}(SC)) </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1858em;vertical-align:-0.4358em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∏</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1864em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">o</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4358em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">o</span><span class="mrel mtight">=</span><span class="mord mtight">‘</span><span class="mord mathnormal mtight">c</span><span class="mord mtight">02’</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07153em;">SC</span><span class="mclose">))</span></span></span></span></li>
<li><p>查询计算机系修c02号课程的学生的姓名和成绩。</p>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mo>∏</mo><mrow><mi>s</mi><mi>n</mi><mi>a</mi><mi>m</mi><mi>e</mi><mo separator="true">,</mo><mi>g</mi><mi>r</mi><mi>a</mi><mi>d</mi><mi>e</mi></mrow></msub><mo stretchy="false">(</mo><msub><mi>σ</mi><mrow><mi>c</mi><mi>n</mi><mi>o</mi><mo>=</mo><mtext>‘</mtext><mi>c</mi><mn>02</mn><mtext>’</mtext></mrow></msub><mo stretchy="false">(</mo><mi>S</mi><mi>C</mi><mo stretchy="false">)</mo><mo>⋈</mo><msub><mi>σ</mi><mrow><mi>s</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi><mo>=</mo><mtext>‘计算机系’</mtext></mrow></msub><mo stretchy="false">(</mo><mi>S</mi><mi>t</mi><mi>u</mi><mi>d</mi><mi>e</mi><mi>n</mi><mi>t</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">∏_{sname, grade}(σ_{cno=‘c02’}(SC)  \bowtie  σ_{sdept=‘计算机系’}(Student)) </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1858em;vertical-align:-0.4358em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∏</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1864em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">nam</span><span class="mord mathnormal mtight">e</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4358em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">o</span><span class="mrel mtight">=</span><span class="mord mtight">‘</span><span class="mord mathnormal mtight">c</span><span class="mord mtight">02’</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07153em;">SC</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⋈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">pt</span><span class="mrel mtight">=</span><span class="mord mtight">‘</span><span class="mord cjk_fallback mtight">计算机系</span><span class="mord mtight">’</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">St</span><span class="mord mathnormal">u</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mclose">))</span></span></span></span></li>
<li><p>查询修了第2学期课程的学生的姓名和所在系。</p>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mo>∏</mo><mrow><mi>s</mi><mi>n</mi><mi>a</mi><mi>m</mi><mi>e</mi><mo separator="true">,</mo><mi>s</mi><mi>d</mi><mi>e</mi><mi>p</mi><mi>t</mi></mrow></msub><mo stretchy="false">(</mo><msub><mi>σ</mi><mrow><mi>s</mi><mi>e</mi><mi>m</mi><mi>e</mi><mi>s</mi><mi>t</mi><mi>e</mi><mi>r</mi><mo>=</mo><mn>2</mn></mrow></msub><mo stretchy="false">(</mo><mi>C</mi><mi>o</mi><mi>u</mi><mi>r</mi><mi>s</mi><mi>e</mi><mo stretchy="false">)</mo><mo>⋈</mo><mi>S</mi><mi>C</mi><mo>⋈</mo><mi>S</mi><mi>t</mi><mi>u</mi><mi>d</mi><mi>e</mi><mi>n</mi><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">∏_{sname, sdept}(σ_{semester=2}(Course) \bowtie SC \bowtie Student) </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1858em;vertical-align:-0.4358em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∏</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1864em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">nam</span><span class="mord mathnormal mtight">e</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">pt</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4358em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">se</span><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">es</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">er</span><span class="mrel mtight">=</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord mathnormal">o</span><span class="mord mathnormal">u</span><span class="mord mathnormal">rse</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⋈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6883em;vertical-align:-0.005em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">SC</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⋈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">St</span><span class="mord mathnormal">u</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span></li>
<li><p>查询修了全部课程的学生的学号和姓名。</p>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mo>∏</mo><mrow><mi>s</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>s</mi><mi>n</mi><mi>a</mi><mi>m</mi><mi>e</mi></mrow></msub><mo stretchy="false">(</mo><mi>S</mi><mi>t</mi><mi>u</mi><mi>d</mi><mi>e</mi><mi>n</mi><mi>t</mi><mo>⋈</mo><mo stretchy="false">(</mo><mi>S</mi><mi>C</mi><mo>÷</mo><msub><mo>∏</mo><mrow><mi>c</mi><mi>n</mi><mi>o</mi></mrow></msub><mo stretchy="false">(</mo><mi>C</mi><mi>o</mi><mi>u</mi><mi>r</mi><mi>s</mi><mi>e</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">∏_{sno, sname}(Student \bowtie (SC ÷ ∏_{cno}(Course))) </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1858em;vertical-align:-0.4358em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∏</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.0017em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">o</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">nam</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4358em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">St</span><span class="mord mathnormal">u</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⋈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07153em;">SC</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">÷</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0497em;vertical-align:-0.2997em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∏</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.0017em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">o</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord mathnormal">o</span><span class="mord mathnormal">u</span><span class="mord mathnormal">rse</span><span class="mclose">)))</span></span></span></span></li>
</ul>
<h1 id="第4章-SQL语言基础"><a href="#第4章-SQL语言基础" class="headerlink" title="第4章 SQL语言基础"></a>第4章 SQL语言基础</h1><h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><h3 id="SQL语言的发展"><a href="#SQL语言的发展" class="headerlink" title="SQL语言的发展"></a>SQL语言的发展</h3><ul>
<li>1986年10月由美国ANSI 公布最早的SQL标准。 </li>
<li>1989年4月，ISO提出了具备完整性特征的SQL，称为<strong>SQL-89</strong> 。</li>
<li>1992年11月，ISO又公布了新的SQL标准，称为<strong>SQL-92</strong><u>（以上均为关系形式）</u>。</li>
<li>1999年颁布<strong>SQL-99</strong>，<u>是SQL92的扩展</u>。</li>
</ul>
<h3 id="SQL语言的特点"><a href="#SQL语言的特点" class="headerlink" title="SQL语言的特点"></a>SQL语言的特点</h3><ol>
<li><p>一体化。 </p>
<blockquote>
<p>一体化指的是SQL语言提供了一个统一的接口来进行数据库的各种操作。无论是数据的查询、插入、更新、删除，还是数据库的结构设计、权限管理等，SQL都可以在一个统一的框架下完成。这种统一性意味着开发者不需要了解底层的数据库实现细节，而只需专注于如何表达自己的需求。<br>举个例子，在SQL中，查询、插入和更新操作有统一的语法结构，开发者可以通过简单的SQL语句实现复杂的数据操作，不需要涉及底层的技术细节。</p>
</blockquote>
</li>
<li><p>高度非过程化。 </p>
<blockquote>
<p>SQL是非过程化的，即在SQL中，开发者不需要关心数据操作的具体执行过程，只需要说明”做什么”（例如查询、更新、删除），而不需要明确告诉数据库”如何做”。<br>非过程化意味着你只需描述你想要的结果，数据库系统会根据内部优化器自动决定最合适的执行计划。例如，执行一个查询时，SQL不要求你指定数据是如何检索的（比如先查哪个表，如何连接等），这些由数据库系统自动完成。</p>
</blockquote>
</li>
<li><p>简洁。</p>
<blockquote>
<p>SQL语言非常简洁，使用自然语言的结构来描述数据操作。SQL的语法是基于英语的，使得它容易理解和使用。由于SQL是<strong>声明式语言</strong>，开发者只需要描述查询的目的，而无需关注实现细节。通过简洁的语法，SQL可以在非常短的代码行内表达复杂的数据库操作。<br><strong>声明式语言（Declarative Language）</strong>是一类编程语言，其主要特点是程序员只需要描述想要做什么，而不需要详细地描述如何去做。也就是说，在声明式语言中，程序员关注的是结果而不是实现过程。</p>
</blockquote>
</li>
<li><p>使用方式多样。</p>
<blockquote>
<p>SQL不仅用于查询数据，还可以用于多种数据库操作和管理任务。它支持数据定义（创建表、修改表结构等）、数据操作（插入、更新、删除等）、数据控制（权限管理等）等功能。</p>
</blockquote>
</li>
</ol>
<h3 id="SQL语言功能概述"><a href="#SQL语言功能概述" class="headerlink" title="SQL语言功能概述"></a>SQL语言功能概述</h3><img src="/articles/7de3dde6/SQL语言功能概述.png" width=70% height=70% />

<h2 id="SQL的数据类型"><a href="#SQL的数据类型" class="headerlink" title="SQL的数据类型"></a>SQL的数据类型</h2><h3 id="数值型"><a href="#数值型" class="headerlink" title="数值型"></a>数值型</h3><ul>
<li>准确型 <ul>
<li>整数<br>Bigint: 8字节，         Int：4字节<br>Smallint：2字节，   Tinyint：1字节<br>Bit：1位，存储1或0</li>
<li>小数<br>Numeric（p,q）或Decimal（p,q），<br>其中：p为数字位长度，q：小数位长度。</li>
</ul>
</li>
<li>近似型<br>Float：8字节<br>Real：4字节</li>
</ul>
<h3 id="字符串型"><a href="#字符串型" class="headerlink" title="字符串型"></a>字符串型</h3><h4 id="普通编码字符串类型"><a href="#普通编码字符串类型" class="headerlink" title="普通编码字符串类型"></a>普通编码字符串类型</h4><blockquote>
<p>这些类型通常使用数据库的<strong>默认字符集</strong>（如 ASCII 或其他单字节编码）进行存储，因此每个字符通常占用 <strong>1个字节</strong>。它们适用于<u>不需要多语言支持、主要处理英文字符或其他单字节字符</u>的场景。</p>
</blockquote>
<ul>
<li><p>Char（n）:定长存储，n&lt;&#x3D;8000</p>
</li>
<li><p>Varchar（n）：不定长存储<strong>（按实际长度存储）</strong>，长度最大不超过n , n&lt;&#x3D;8000 </p>
<blockquote>
<p>注：n 为字符个数</p>
</blockquote>
</li>
<li><p>Text：存储大于8000字节的文本</p>
</li>
</ul>
<h4 id="统一字符编码字符串类型"><a href="#统一字符编码字符串类型" class="headerlink" title="统一字符编码字符串类型"></a>统一字符编码字符串类型</h4><ul>
<li>nchar（n）：定长存储，n&lt;&#x3D;4000 </li>
<li>nvarchar（n）：不定长存储，长度最大不超过n , n&lt;&#x3D;4000 </li>
<li>ntext：存储大于8000字节的文本<blockquote>
<p>特点：每个字符占两个字节</p>
</blockquote>
</li>
</ul>
<h4 id="二进制字符串类型"><a href="#二进制字符串类型" class="headerlink" title="二进制字符串类型"></a>二进制字符串类型</h4><ul>
<li>Binary(n)：固定长度，n &lt;&#x3D; 8000。</li>
<li>Varbinary(n)：可变长度，n &lt;＝8000 。<blockquote>
<p>注：n为二进制数据的字节数</p>
</blockquote>
</li>
<li><strong>image：</strong>大容量、可变长二进制字符数据，可用于存储文件。</li>
</ul>
<h3 id="日期时间型"><a href="#日期时间型" class="headerlink" title="日期时间型"></a>日期时间型</h3><ul>
<li><p>Datetime：8字节，年月日时分秒<strong>毫秒</strong><br>（例：‘2001&#x2F;08&#x2F;03 10:30:00.000’ ）</p>
</li>
<li><p>SmallDateTime：4字节，年月日时<strong>分</strong><br>（例： ‘2001&#x2F;08&#x2F;03 10:30:00’ ）</p>
</li>
<li><p>日期、时间的输入格式</p>
</li>
</ul>
<h3 id="货币型"><a href="#货币型" class="headerlink" title="货币型"></a>货币型</h3><ul>
<li>Money： 8 个字节，精确到货币单位的千分之十。</li>
<li>Smallmoney： 4 个字节，精确到货币单位的千分之十。</li>
<li>限制到小数点后 4 位。</li>
<li><strong>可以带有适当的货币符号。</strong>例如，100 英镑可表示为 £100。</li>
</ul>
<h2 id="基本表的定义、删除及修改"><a href="#基本表的定义、删除及修改" class="headerlink" title="基本表的定义、删除及修改"></a>基本表的定义、删除及修改</h2><h3 id="基本表的定义与删除"><a href="#基本表的定义与删除" class="headerlink" title="基本表的定义与删除"></a>基本表的定义与删除</h3><ol>
<li>定义基本表<br>  使用SQL语言中的<code>CREATE TABLE</code>语句实现，其一般格式为：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span>  <span class="keyword">TABLE</span>  <span class="operator">&lt;</span>表名<span class="operator">&gt;</span>（</span><br><span class="line">    <span class="operator">&lt;</span>列名<span class="operator">&gt;</span>  <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span>  [列级完整性约束定义]</span><br><span class="line">&#123;,  <span class="operator">&lt;</span>列名<span class="operator">&gt;</span>  <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> </span><br><span class="line">    [列级完整性约束定义］ … &#125;</span><br><span class="line">[, 表级完整性约束定义 ] ） </span><br></pre></td></tr></table></figure></li>
</ol>
<ul>
<li><p>在列级完整性约束定义处可以定义的约束</p>
<ul>
<li>NOT NULL：限制列取值非空。</li>
<li>DEFAULT：给定列的默认值。</li>
<li>UNIQUE：限制列取值不重。</li>
<li>CHECK：限制列的取值范围。</li>
<li>PRIMARY KEY：指定本列为主码。</li>
<li>FOREIGN KEY：定义本列为引用其他表的外码。使用形式为：</li>
<li>[FOREIGN KEY(&lt;外码列名&gt;)] REFERENCES &lt;外表名&gt;（&lt;外表列名&gt;）</li>
</ul>
</li>
<li><p>几点说明</p>
<ul>
<li>NOT NULL和DEFAULT只能是列级完整性约束；</li>
<li>其他约束均可在表级完整性约束处定义。</li>
<li>注意以下几点：<ul>
<li>第一，如果CHECK约束是定义多列之间的取值约束，则只能在表级完整性约束处定义；</li>
<li>第二，如果表的主码由多个列组成，则也只能在表级完整性约束处定义，并将主码列用括号括起来，即：PRIMARY KEY（列1｛[，列2 ] …｝）；</li>
<li>第三，如果在表级完整性约束处定义外码，则“FOREIGN KEY (&lt;外码列名&gt;)”部分不能省。</li>
</ul>
</li>
</ul>
</li>
<li><p>约束说明<br>① 列取值非空约束<br><code>&lt;列名&gt;  &lt;类型&gt; NOT NULL</code><br>例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sname <span class="type">char</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br></pre></td></tr></table></figure>
<p>② 表主码约束</p>
</li>
<li><p>在定义列时定义主码（仅用于单列主码）<br><code>列定义  PRIMARY KEY</code><br>例： </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SNO <span class="type">char</span>(<span class="number">7</span>) <span class="keyword">PRIMARY</span> KEY</span><br></pre></td></tr></table></figure></li>
<li><p>在定义完列时定义主码（用于单列或多列主码）<br><code>PRIMARY KEY （&lt;列名序列&gt;）</code><br>例： </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">PRIMARY</span> KEY(SNO)</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY(SNO，CNO)</span><br></pre></td></tr></table></figure>
<p>③ 外码引用约束</p>
</li>
<li><p>指明本表外码列引用的表及表中的主码列。<br><code>[ FOREIGN KEY （&lt;本表列名&gt;）]</code><br><code>REFERENCES &lt;外表名&gt;（&lt;外表主码列名&gt;）</code><br>例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FOREIGN</span> KEY （sno）</span><br><span class="line">  <span class="keyword">REFERENCES</span>  学生表（sno）</span><br></pre></td></tr></table></figure>
<p>④ 默认值约束</p>
</li>
<li><p>格式：DEFAULT 默认值<br>例：<br>定义系的默认值为“计算机系”。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DEFAULT</span>  ‘计算机系’</span><br></pre></td></tr></table></figure>
<p>⑤ CHECK约束</p>
</li>
<li><p>格式：CHECK (约束表达式)<br>例：<br>定义成绩大于等于0。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CHECK</span> (  grade <span class="operator">&gt;=</span> <span class="number">0</span> )</span><br></pre></td></tr></table></figure>
<p>⑥ UNIQUE约束</p>
</li>
<li><p>在列级约束定义（仅用于单列约束）<br><code>列定义  UNIQUE</code><br>例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SNAME  <span class="type">char</span>(<span class="number">7</span>) <span class="keyword">UNIQUE</span></span><br></pre></td></tr></table></figure></li>
<li><p>在表级约束定义（用于单列或多列组合约束）<br><code>UNIQUE （&lt;列名序列&gt;）</code><br>例： </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UNIQUE</span> (SNO，CNO)</span><br></pre></td></tr></table></figure></li>
</ul>
<ol start="2">
<li><p>创建学生表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Student (</span><br><span class="line">  Sno   <span class="type">char</span> ( <span class="number">7</span> )  <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">  Sname <span class="type">char</span> ( <span class="number">10</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  Ssex  <span class="type">char</span> (<span class="number">2</span>)  </span><br><span class="line">        <span class="keyword">CHECK</span> (Ssex <span class="operator">=</span> <span class="string">&#x27;男&#x27;</span> <span class="keyword">OR</span> Ssex <span class="operator">=</span> <span class="string">&#x27;女&#x27;</span>), </span><br><span class="line">  Sage  tinyint  </span><br><span class="line">        <span class="keyword">CHECK</span> (Sage <span class="operator">&gt;=</span> <span class="number">15</span> <span class="keyword">AND</span> Sage <span class="operator">&lt;=</span><span class="number">45</span>),</span><br><span class="line">  Sdept <span class="type">char</span> (<span class="number">20</span> ) <span class="keyword">DEFAULT</span> <span class="string">&#x27;计算机系&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>创建课程表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Course (</span><br><span class="line">  Cno    <span class="type">char</span>(<span class="number">10</span>)  <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  Cname  <span class="type">char</span>(<span class="number">20</span>)  <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  Ccredit  tinyint <span class="keyword">CHECK</span> (Ccredit <span class="operator">&gt;</span> <span class="number">0</span>),</span><br><span class="line">  Semester tinyint <span class="keyword">CHECK</span> (Semester <span class="operator">&gt;</span> <span class="number">0</span>),</span><br><span class="line">  <span class="keyword">Period</span>  <span class="type">int</span> <span class="keyword">CHECK</span> (<span class="keyword">Period</span> <span class="operator">&gt;</span> <span class="number">0</span>),</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY(Cno) </span><br><span class="line">) </span><br></pre></td></tr></table></figure>
</li>
<li><p>创建SC(Student-Course)表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> SC (</span><br><span class="line">  Sno <span class="type">char</span>(<span class="number">7</span>)  <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  Cno <span class="type">char</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  Grade  tinyint,</span><br><span class="line">      <span class="keyword">CHECK</span> (Grade <span class="operator">&gt;=</span> <span class="number">0</span> <span class="keyword">and</span> Grade <span class="operator">&lt;=</span> <span class="number">100</span>),</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY ( Sno, Cno ),</span><br><span class="line">  <span class="keyword">FOREIGN</span> KEY ( Sno )  </span><br><span class="line">      <span class="keyword">REFERENCES</span>  Student ( Sno ),</span><br><span class="line">  <span class="keyword">FOREIGN</span> KEY ( Cno )  </span><br><span class="line">      <span class="keyword">REFERENCES</span>  Course ( Cno ) </span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除表</p>
</li>
</ol>
<ul>
<li>当确信不再需要某个表时，可以将其删除</li>
<li>删除表时会将与表有关的所有对象一起删掉，包括表中的数据。</li>
<li>删除表的语句格式为：<br><code>DROP  TABLE  &lt;表名&gt;  &#123; [, &lt;表名&gt; ] … &#125;</code><br>例：<br>删除test表的语句为：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> test</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="修改表结构"><a href="#修改表结构" class="headerlink" title="修改表结构"></a>修改表结构</h3><ul>
<li>在定义完表之后，如果需求有变化，比如添加列、删除列或修改列定义，可以使用ALTER TABLE语句实现。</li>
<li>ALTER TABLE语句可以对表添加列、删除列、修改列的定义、定义主码、外码，也可以添加和删除约束。 </li>
<li><strong>修改表结构语法</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span>  </span><br><span class="line">  [ <span class="keyword">ALTER</span> <span class="keyword">COLUMN</span> <span class="operator">&lt;</span>列名<span class="operator">&gt;</span> <span class="operator">&lt;</span>新数据类型<span class="operator">&gt;</span>] </span><br><span class="line"><span class="operator">|</span> [ <span class="keyword">ADD</span> [<span class="keyword">COLUMN</span>] <span class="operator">&lt;</span>列名<span class="operator">&gt;</span> <span class="operator">&lt;</span>数据类型<span class="operator">&gt;</span> </span><br><span class="line"><span class="operator">|</span> [ <span class="keyword">DROP</span> <span class="keyword">COLUMN</span> <span class="operator">&lt;</span>列名<span class="operator">&gt;</span>  ] </span><br><span class="line"><span class="operator">|</span> [ <span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY(列名 [，… n ] )] </span><br><span class="line"><span class="operator">|</span> [ <span class="keyword">ADD</span> <span class="keyword">FOREIGN</span> KEY(列名)</span><br><span class="line">   REFERNECES 表名 (列名)]</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>示例</strong><br>例2．为SC表添加“修课类别”列，此列的定义为：XKLB  char(4)<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> SC</span><br><span class="line">  <span class="keyword">ADD</span> XKLB <span class="type">char</span>(<span class="number">4</span>) <span class="keyword">NULL</span> </span><br></pre></td></tr></table></figure>
例3．将新添加的XKLB的类型改为：char(6)。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> SC</span><br><span class="line">  <span class="keyword">ALTER</span> <span class="keyword">COLUMN</span> XKLB <span class="type">char</span>(<span class="number">6</span>)</span><br></pre></td></tr></table></figure>
例4．删除Course表的Period列。 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> Course </span><br><span class="line">  <span class="keyword">DROP</span> <span class="keyword">COLUMN</span> <span class="keyword">Period</span> </span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="数据查询功能"><a href="#数据查询功能" class="headerlink" title="数据查询功能"></a>数据查询功能</h2><h3 id="查询语句的基本结构"><a href="#查询语句的基本结构" class="headerlink" title="查询语句的基本结构"></a>查询语句的基本结构</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">&lt;</span>目标列名序列<span class="operator">&gt;</span>    <span class="comment">--需要哪些列</span></span><br><span class="line">  <span class="keyword">FROM</span> <span class="operator">&lt;</span>数据源<span class="operator">&gt;</span>              <span class="comment">--来自于哪些表</span></span><br><span class="line"> [<span class="keyword">WHERE</span> <span class="operator">&lt;</span>检索条件<span class="operator">&gt;</span>]       <span class="comment">--根据什么条件</span></span><br><span class="line"> [<span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="operator">&lt;</span>分组依据列<span class="operator">&gt;</span>]      </span><br><span class="line"> [<span class="keyword">HAVING</span> <span class="operator">&lt;</span>组提取条件<span class="operator">&gt;</span>]</span><br><span class="line"> [<span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="operator">&lt;</span>排序依据列<span class="operator">&gt;</span>] </span><br></pre></td></tr></table></figure>

<h3 id="简单查询"><a href="#简单查询" class="headerlink" title="简单查询"></a>简单查询</h3><h4 id="选择表中若干列"><a href="#选择表中若干列" class="headerlink" title="选择表中若干列"></a>选择表中若干列</h4><ol>
<li><strong>查询指定的列</strong></li>
</ol>
<ul>
<li>查询表中用户感兴趣的部分属性列。<br>例5：查询全体学生的学号与姓名。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sno，Sname <span class="keyword">FROM</span> Student</span><br></pre></td></tr></table></figure>
例6：查询全体学生的姓名、学号和所在系。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname，Sno，Sdept  </span><br><span class="line">  <span class="keyword">FROM</span> Student </span><br></pre></td></tr></table></figure></li>
</ul>
<ol start="2">
<li>查询全部列<br>例7．查询全体学生的记录<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sno，Sname，Ssex, Sage, Sdept </span><br><span class="line">  <span class="keyword">FROM</span> Student</span><br></pre></td></tr></table></figure>
等价于：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>  <span class="operator">*</span>  <span class="keyword">FROM</span> Student </span><br></pre></td></tr></table></figure></li>
<li>查询经过计算的列<br>例8．查询全体学生的姓名及其出生年份。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname, <span class="number">2006</span> <span class="operator">-</span> Sage  </span><br><span class="line">  <span class="keyword">FROM</span> Student</span><br></pre></td></tr></table></figure>
例9．查询全体学生的姓名和出生年份所在系，并在出生年份列前加入一个列，此列的每行数据均为`出生年份`常量值。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname，`出生年份`, <span class="number">2006</span><span class="operator">-</span>Sage</span><br><span class="line">  <span class="keyword">FROM</span> Student </span><br></pre></td></tr></table></figure></li>
<li>列别名(Alias)</li>
</ol>
<ul>
<li><p>在 SELECT 语句中，你可以使用 <strong>列别名（Alias）</strong> 给查询结果的列起一个更直观的名称，方便阅读。</p>
</li>
<li><p>语法：<br><code>列名 | 表达式 [ AS ] 列标题</code><br>或：<br><code>列标题 = 列名 | 表达式</code><br>例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname <span class="keyword">AS</span> 姓名, `<span class="keyword">Year</span> <span class="keyword">of</span> Birth` <span class="keyword">AS</span> 出生年份, <span class="number">2006</span> <span class="operator">-</span> Sage <span class="keyword">AS</span> 年份</span><br><span class="line">  <span class="keyword">FROM</span> Student </span><br></pre></td></tr></table></figure>
<p>或：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 姓名 <span class="operator">=</span> Sname, 出生年份 <span class="operator">=</span> `<span class="keyword">Year</span> <span class="keyword">of</span> Birth`, 年份 <span class="operator">=</span> <span class="number">2006</span> <span class="operator">-</span> Sage</span><br><span class="line">  <span class="keyword">FROM</span> Student;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="选择表中若干元组"><a href="#选择表中若干元组" class="headerlink" title="选择表中若干元组"></a>选择表中若干元组</h4><ol>
<li>消除取值相同的记录<br>例10．在修课表中查询有哪些学生修了课程，要求列出学生的学号。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>  Sno  <span class="keyword">FROM</span>  SC</span><br></pre></td></tr></table></figure></li>
</ol>
<ul>
<li>结果中有重复的行。</li>
<li>用DISTINCT关键字可以去掉结果中的重复行。</li>
<li>DISTINCT关键字放在SELECT词的后边、目标列名序列的前边。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span>  <span class="keyword">DISTINCT</span>  Sno  <span class="keyword">FROM</span>  SC</span><br></pre></td></tr></table></figure></li>
</ul>
<ol start="2">
<li><p>查询满足条件的元组 </p>
<img src="/articles/7de3dde6/查询元组.png" width=70% height=70% />
</li>
<li><p>比较大小<br>例11．查询计算机系全体学生的姓名。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname <span class="keyword">FROM</span> Student </span><br><span class="line">  <span class="keyword">WHERE</span> Sdept <span class="operator">=</span> <span class="string">&#x27;计算机系&#x27;</span></span><br></pre></td></tr></table></figure>
<p>例12．查询年龄在20岁以下的学生的姓名及年龄。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname, Sage <span class="keyword">FROM</span> Student </span><br><span class="line">  <span class="keyword">WHERE</span> Sage <span class="operator">&lt;</span> <span class="number">20</span></span><br></pre></td></tr></table></figure>
<p>例13．查询考试成绩有不及格的学生的学号</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> Sno <span class="keyword">FROM</span> SC </span><br><span class="line">  <span class="keyword">WHERE</span> Grade <span class="operator">&lt;</span> <span class="number">60</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>确定范围</p>
</li>
</ol>
<ul>
<li><p>用<code>BETWEEN…AND</code>和<code>NOT BETWEEN…AND</code></p>
</li>
<li><p>是逻辑运算符，可以用来查找属性值在或不在指定范围内的元组，其中<strong>BETWEEN</strong>后边指定范围的<strong>下限</strong>，<strong>AND</strong>后边指定范围的<strong>上限</strong>。</p>
</li>
<li><p>BETWEEN…AND…的格式为：<br><code>列名 | 表达式 [ NOT ] BETWEEN 下限值 AND 上限值</code></p>
</li>
<li><p>如果列或表达式的值[在&#x2F;不在]下限值和上限值范围内，则结果为True，表明此记录符合查询条件。  </p>
</li>
<li><p>示例<br>例14．查询年龄在20～23岁之间的学生的姓名、所在系和年龄。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname, Sdept, Sage  <span class="keyword">FROM</span> Student </span><br><span class="line">  <span class="keyword">WHERE</span> Sage <span class="keyword">BETWEEN</span> <span class="number">20</span> <span class="keyword">AND</span> <span class="number">23</span></span><br></pre></td></tr></table></figure>
<p>例15．查询年龄不在20～23之间的学生姓名、所在系和年龄。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname, Sdept, Sage  <span class="keyword">FROM</span> Student </span><br><span class="line">  <span class="keyword">WHERE</span> Sage <span class="keyword">NOT</span> <span class="keyword">BETWEEN</span> <span class="number">20</span> <span class="keyword">AND</span> <span class="number">23</span></span><br></pre></td></tr></table></figure></li>
</ul>
<ol start="5">
<li>确定集合</li>
</ol>
<ul>
<li><p>使用IN运算符。</p>
</li>
<li><p>用来查找属性值属于指定集合的元组。</p>
</li>
<li><p>格式为：<br><code>列名 [ NOT ] IN （常量1, 常量2, … 常量n）</code></p>
</li>
<li><p>当列中的值与IN中的某个常量值相等时，则结果为True，表明此记录为符合查询条件的记录；</p>
</li>
<li><p>NOT IN：当列中的值与某个常量值相同时，则结果为False，表明此记录为不符合查询条件的记录</p>
</li>
<li><p>示例<br>例16．查询信息系、数学系和计算机系学生的姓名和性别。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname, Ssex  <span class="keyword">FROM</span> Student </span><br><span class="line">  <span class="keyword">WHERE</span> Sdept <span class="keyword">IN</span> (<span class="string">&#x27;信息系&#x27;</span>, <span class="string">&#x27;数学系&#x27;</span>, <span class="string">&#x27;计算机系&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>例17．查询既不是信息系、数学系，也不是计算机系学生的姓名和性别。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname, Ssex  <span class="keyword">FROM</span> Student </span><br><span class="line">  <span class="keyword">WHERE</span> Sdept <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="string">&#x27;信息系&#x27;</span>, <span class="string">&#x27;数学系&#x27;</span>, <span class="string">&#x27;计算机系&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
<li><p>使用LIKE运算符</p>
</li>
<li><p>一般形式为：<br><code>列名  [NOT]  LIKE  &lt;匹配串&gt;</code></p>
</li>
<li><p>匹配串中可包含如下四种通配符：</p>
<ul>
<li>_：匹配任意一个字符；</li>
<li>%：匹配0个或多个字符；</li>
<li>[ ]：匹配[ ]中的任意一个字符；</li>
<li>[ ^ ]：不匹配[ ]中的任意一个字符 <blockquote>
<p><strong>例：</strong>[^0-9]匹配任何不是数字的字符。</p>
</blockquote>
</li>
</ul>
</li>
<li><p>示例<br>例18．查询姓‘张’的学生的详细信息。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student </span><br><span class="line">  <span class="keyword">WHERE</span> Sname <span class="keyword">LIKE</span> <span class="string">&#x27;张%&#x27;</span></span><br></pre></td></tr></table></figure>
<p>例19．查询学生表中姓‘张’、‘李’和‘刘’的学生的情况。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student </span><br><span class="line">  <span class="keyword">WHERE</span> Sname <span class="keyword">LIKE</span> <span class="string">&#x27; [张李刘]%&#x27;</span></span><br></pre></td></tr></table></figure>
<p>例20．查询名字中第2个字为‘小’或‘大’的学生的姓名和学号</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname, Sno <span class="keyword">FROM</span> Student </span><br><span class="line">  <span class="keyword">WHERE</span> Sname <span class="keyword">LIKE</span> <span class="string">&#x27;_[小大]%&#x27;</span></span><br></pre></td></tr></table></figure>
<p>例21．查询所有不姓“刘”的学生。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname <span class="keyword">FROM</span> Student </span><br><span class="line">  <span class="keyword">WHERE</span> Sname <span class="keyword">NOT</span> <span class="keyword">LIKE</span> <span class="string">&#x27;刘%&#x27;</span></span><br></pre></td></tr></table></figure>
<p>例22．查询学号的最后一位不是2、3、5的学生情况。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student </span><br><span class="line">  <span class="keyword">WHERE</span> Sno <span class="keyword">LIKE</span> <span class="string">&#x27;%[^235]&#x27;</span> </span><br></pre></td></tr></table></figure></li>
<li><p>空值（NULL）在数据库中表示不确定的值。</p>
</li>
<li><p>例如，学生选修课程后还没有考试时，这些学生有选课记录，但没有考试成绩，因此考试成绩为空值。</p>
</li>
<li><p><strong>判断某个值是否为NULL值，不能使用普通的比较运算符。</strong></p>
</li>
<li><p>判断取值为空的语句格式为：<br><code>列名 IS NULL</code></p>
</li>
<li><p>判断取值不为空的语句格式为：<br><code>列名 IS NOT NULL</code><br>例23．查询无考试成绩的学生的学号和相应的课程号。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sno, Cno <span class="keyword">FROM</span> SC </span><br><span class="line">  <span class="keyword">WHERE</span> Grade <span class="keyword">IS</span> <span class="keyword">NULL</span></span><br></pre></td></tr></table></figure>
<p>例24．查询所有有考试成绩的学生的学号和课程号。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sno, Cno <span class="keyword">FROM</span> SC </span><br><span class="line">  <span class="keyword">WHERE</span> Grade <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> </span><br></pre></td></tr></table></figure></li>
<li><p>在<code>WHERE</code>子句中可以使用逻辑运算符<code>AND</code>和<code>OR</code>来组成多条件查询。</p>
<ul>
<li>用<code>AND</code>连接的条件表示必须全部满足所有的条件的结果才为<code>True</code>；</li>
<li>用<code>OR</code>连接的条件表示只要满足其中一个条件结果即为<code>True</code>。<blockquote>
<p>AND 的优先级高于 OR。</p>
</blockquote>
</li>
</ul>
</li>
<li><p>例25．查询计算机系年龄在20岁以下的学生姓名。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname <span class="keyword">FROM</span> Student </span><br><span class="line">  <span class="keyword">WHERE</span> Sdept <span class="operator">=</span> <span class="string">&#x27;CS&#x27;</span> <span class="keyword">AND</span> Sage <span class="operator">&lt;</span> <span class="number">20</span> </span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="对查询结果进行排序"><a href="#对查询结果进行排序" class="headerlink" title="对查询结果进行排序"></a>对查询结果进行排序</h4><ul>
<li>可对查询结果进行排序。 </li>
<li>排序子句为：<br><code>ORDER BY &lt;列名&gt; [ASC | DESC ] [,&lt;列名&gt; … ]</code></li>
<li>说明：按&lt;列名&gt;进行升序（ASC）或降序（DESC）排序。</li>
<li>示例<br>例26．将学生按年龄的升序排序。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student <span class="keyword">ORDER</span> <span class="keyword">BY</span> Sage</span><br></pre></td></tr></table></figure>
例27．查询选修了‘c02’号课程的学生的学号及其成绩，查询结果按成绩降序排列。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sno, Grade <span class="keyword">FROM</span> SC</span><br><span class="line">  <span class="keyword">WHERE</span> Cno<span class="operator">=</span><span class="string">&#x27;c02&#x27;</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> Grade <span class="keyword">DESC</span></span><br></pre></td></tr></table></figure>
例28．查询全体学生的信息，查询结果按所在系的系名升序排列，同一系的学生按年龄降序排列。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student</span><br><span class="line">  <span class="keyword">ORDER</span> <span class="keyword">BY</span> Sdept, Sage <span class="keyword">DESC</span>  </span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="使用计算函数汇总数据"><a href="#使用计算函数汇总数据" class="headerlink" title="使用计算函数汇总数据"></a>使用计算函数汇总数据</h4><ul>
<li>SQL提供的计算函数有：<ul>
<li>COUNT（ * ）：统计表中元组个数；</li>
<li>COUNT（[DISTINCT] &lt;列名&gt; ）：统计本列列值个数；</li>
<li>SUM（[DISTINCT] &lt;列名&gt; ）：计算列值总和；</li>
<li>AVG（[DISTINCT] &lt;列名&gt; ）：计算列值平均值；</li>
<li>MAX（[DISTINCT] &lt;列名&gt; ）：求列值最大值； </li>
<li>MIN（[DISTINCT] &lt;列名&gt; ）：求列值最小值。</li>
</ul>
</li>
<li>上述函数中除COUNT（*）外，其他函数在计算过程中均忽略NULL值。</li>
<li>示例<br>例29．统计学生总人数。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> Student </span><br></pre></td></tr></table></figure>
例30．统计选修了课程的学生的人数。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="keyword">DISTINCT</span> Sno)</span><br><span class="line">  <span class="keyword">FROM</span> SC</span><br></pre></td></tr></table></figure>
例31．计算9512101号学生的考试总成绩之和。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(Grade) <span class="keyword">FROM</span> SC </span><br><span class="line">  <span class="keyword">WHERE</span> Sno <span class="operator">=</span> <span class="string">&#x27;9512101&#x27;</span> </span><br></pre></td></tr></table></figure>
例32．计算’C01’号课程学生的考试平均成绩。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(Grade) <span class="keyword">FROM</span> SC </span><br><span class="line">  <span class="keyword">WHERE</span> Cno<span class="operator">=</span><span class="string">&#x27;C01&#x27;</span></span><br></pre></td></tr></table></figure>
例33．查询选修了’C01’号课程的学生的最高分和最低分。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(Grade) , <span class="built_in">MIN</span>(Grade)  </span><br><span class="line">  <span class="keyword">FROM</span> SC <span class="keyword">WHERE</span> Cno<span class="operator">=</span><span class="string">&#x27;C01&#x27;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注意：</strong>计算函数不能出现在WHERE子句中</p>
</blockquote>
</li>
</ul>
<h4 id="对查询结果进行分组计算"><a href="#对查询结果进行分组计算" class="headerlink" title="对查询结果进行分组计算"></a>对查询结果进行分组计算</h4><ul>
<li>作用：可以控制计算的级别：对全表还是对一组。</li>
<li>目的：细化计算函数的作用对象。</li>
<li>分组语句的一般形式：<ul>
<li>[GROUP BY &lt;分组条件&gt;] </li>
<li>[HAVING &lt;组过滤条件&gt;]</li>
</ul>
</li>
</ul>
<ol>
<li>使用GROUP BY<br>例34．统计每门课程的选课人数，列出课程号和人数。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Cno <span class="keyword">as</span> 课程号, </span><br><span class="line">  <span class="built_in">COUNT</span>(Sno) <span class="keyword">as</span> 选课人数 </span><br><span class="line"><span class="keyword">FROM</span> SC <span class="keyword">GROUP</span> <span class="keyword">BY</span> Cno </span><br></pre></td></tr></table></figure></li>
</ol>
<ul>
<li>对查询结果按Cno的值分组，所有具有相同Cno值的元组为一组，然后再对每一组使用COUNT计算，求得每组的学生人数。<img src="/articles/7de3dde6/group_by.png" width=70% height=70% />
例35．查询每名学生的选课门数和平均成绩。
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sno <span class="keyword">as</span> 学号, </span><br><span class="line">  <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">as</span> 选课门数, </span><br><span class="line">  <span class="built_in">AVG</span>(Grade) <span class="keyword">as</span> 平均成绩 </span><br><span class="line"><span class="keyword">FROM</span> SC <span class="keyword">GROUP</span> <span class="keyword">BY</span> Sno</span><br></pre></td></tr></table></figure></li>
<li><strong>HAVING</strong>用于对分组自身进行限制，它有点像WHERE子句，但它<strong>用于组而不是对单个记录</strong>。<br>例36．查询修了3门以上课程的学生的学号<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sno <span class="keyword">FROM</span> SC </span><br><span class="line">  <span class="keyword">GROUP</span> <span class="keyword">BY</span> Sno</span><br><span class="line">  <span class="keyword">HAVING</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="operator">&gt;</span> <span class="number">3</span> </span><br></pre></td></tr></table></figure></li>
<li>示例<br>例37．查询修课门数等于或大于4门的学生的平均成绩和选课门数。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sno, <span class="built_in">AVG</span>(Grade) 平均成绩, </span><br><span class="line">  <span class="built_in">COUNT</span>(<span class="operator">*</span>) 修课门数</span><br><span class="line">  <span class="keyword">FROM</span> SC </span><br><span class="line">  <span class="keyword">GROUP</span> <span class="keyword">BY</span> Sno </span><br><span class="line">  <span class="keyword">HAVING</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="operator">&gt;=</span> <span class="number">4</span> </span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="多表连接查询"><a href="#多表连接查询" class="headerlink" title="多表连接查询"></a>多表连接查询</h3><ul>
<li><p>若一个查询同时涉及两个或两个以上的表，则称之为连接查询。</p>
</li>
<li><p>连接查询是关系数据库中最主要的查询。</p>
</li>
<li><p>连接查询包括内连接、外连接和交叉连接等。</p>
</li>
<li><p>连接查询中用于连接两个表的条件称为连接条件或连接谓词。 </p>
</li>
<li><p>一般格式为：<br><code>[&lt;表名1.&gt;][&lt;列名1&gt;] &lt;比较运算符&gt; [&lt;表名2.&gt;][&lt;列名2&gt;]</code></p>
</li>
<li><p><strong>内连接</strong></p>
</li>
<li><p>SQL-92 内连接语法如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> …</span><br><span class="line">  <span class="keyword">FROM</span> 表名 [<span class="keyword">INNER</span>] <span class="keyword">JOIN</span></span><br><span class="line">  被连接表</span><br><span class="line">  <span class="keyword">ON</span>  连接条件</span><br></pre></td></tr></table></figure></li>
<li><p>执行连接操作的过程：</p>
<ul>
<li>首先取表1中的第1个元组，然后从头开始扫描表2，逐一查找满足连接条件的元组，</li>
<li>找到后就将表1中的第1个元组与该元组拼接起来，形成结果表中的一个元组。</li>
<li>表2全部查找完毕后，再取表1中的第2个元组，然后再从头开始扫描表2， …</li>
<li>重复这个过程，直到表1中的全部元组都处理完毕为止。<br>例40.查询计算机系学生的修课情况，要求列出学生的名字、所修课的课程号和成绩。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname, Cno, Grade </span><br><span class="line">  <span class="keyword">FROM</span> Student <span class="keyword">JOIN</span> SC  </span><br><span class="line">  <span class="keyword">ON</span> Student.Sno <span class="operator">=</span> SC.Sno</span><br><span class="line">  <span class="keyword">WHERE</span> Sdept <span class="operator">=</span> <span class="string">&#x27;计算机系&#x27;</span> </span><br></pre></td></tr></table></figure>
例41. 查询信息系修了VB课程的学生的修课成绩，要求列出学生姓名、课程名和成绩。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname, Cname, Grade</span><br><span class="line">  <span class="keyword">FROM</span>  Student  s  <span class="keyword">JOIN</span>  SC </span><br><span class="line">  <span class="keyword">ON</span> s.Sno <span class="operator">=</span> SC. Sno</span><br><span class="line">  <span class="keyword">JOIN</span>  Course c <span class="keyword">ON</span> c.Cno <span class="operator">=</span> SC.Cno</span><br><span class="line">  <span class="keyword">WHERE</span> Sdept <span class="operator">=</span> <span class="string">&#x27;信息系&#x27;</span> </span><br><span class="line">        <span class="keyword">AND</span> Cname <span class="operator">=</span> <span class="string">&#x27;VB&#x27;</span> </span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>自连接</strong></p>
<ul>
<li>为特殊的内连接</li>
<li>相互连接的表物理上为同一张表。</li>
<li>必须为两个表取别名，使之在逻辑上成为两个表。<br>例43. 查询与刘晨在同一个系学习的学生的姓名和所在的系。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> S2.Sname, S2.Sdept</span><br><span class="line">  <span class="keyword">FROM</span> Student S1 <span class="keyword">JOIN</span> Student S2</span><br><span class="line">  <span class="keyword">ON</span> S1.Sdept <span class="operator">=</span> S2.Sdept</span><br><span class="line">  <span class="keyword">WHERE</span> S1.Sname <span class="operator">=</span> ‘刘晨’</span><br><span class="line">  <span class="keyword">AND</span> S2.Sname <span class="operator">!=</span> ‘刘晨’</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>外连接</strong></p>
<ul>
<li>只限制一张表中的数据必须满足连接条件，而另一张表中数据可以不满足连接条件。 </li>
<li>ANSI方式的外连接的语法格式为：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span>  表<span class="number">1</span>  <span class="keyword">LEFT</span> <span class="operator">|</span> <span class="keyword">RIGHT</span>  [<span class="keyword">OUTER</span>]  </span><br><span class="line">  <span class="keyword">JOIN</span>  表<span class="number">2</span>  <span class="keyword">ON</span>  <span class="operator">&lt;</span>连接条件<span class="operator">&gt;</span> </span><br></pre></td></tr></table></figure></li>
<li>theta方式的外连接的语法格式为：<br>左外连接：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span>  表<span class="number">1</span>, 表<span class="number">2</span>  <span class="keyword">WHERE</span> [表<span class="number">1.</span>]列名(<span class="operator">+</span>) ＝ [表<span class="number">2.</span>]列名</span><br></pre></td></tr></table></figure>
右外连接：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span>  表<span class="number">1</span>, 表<span class="number">2</span>  <span class="keyword">WHERE</span> [表<span class="number">1.</span>]列名＝ [表<span class="number">2.</span>]列名(<span class="operator">+</span>) </span><br></pre></td></tr></table></figure>
例44. 查询学生的修课情况，包括修了课程的学生和没有修课的学生。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Student.Sno, Sname, Cno, Grade</span><br><span class="line">  <span class="keyword">FROM</span> Student <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> SC</span><br><span class="line">  <span class="keyword">ON</span> Student.Sno <span class="operator">=</span> SC.Sno </span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h3><ul>
<li><p>在SQL语言中，一个SELECT－FROM－WHERE语句称为一个查询块。</p>
</li>
<li><p>子查询是一个 SELECT 查询，它嵌套在 SELECT、INSERT、UPDATE、DELETE 语句的 WHERE 或 HAVING 子句内，或其它子查询中 </p>
</li>
<li><p>子查询的 SELECT 查询总是使用圆括号括起来。</p>
</li>
<li><p>使用子查询进行基于集合的测试的语句的一般格式为：<br><code>列名 [NOT] IN (子查询) </code></p>
</li>
<li><p>示例<br>例45. 查询与刘晨在同一个系的学生。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sno, Sname, Sdept</span><br><span class="line">  <span class="keyword">FROM</span> Student</span><br><span class="line">  <span class="keyword">WHERE</span> Sdept <span class="keyword">IN</span></span><br><span class="line">    ( <span class="keyword">SELECT</span> Sdept <span class="keyword">FROM</span> Student</span><br><span class="line">      <span class="keyword">WHERE</span> Sname <span class="operator">=</span> ‘刘晨’ )</span><br><span class="line">      <span class="keyword">AND</span> Sname <span class="operator">!=</span> ‘刘晨’ </span><br></pre></td></tr></table></figure>
<p>例45. 查询与刘晨在同一个系的学生。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sno, Sname, Sdept</span><br><span class="line">  <span class="keyword">FROM</span> Student</span><br><span class="line">  <span class="keyword">WHERE</span> Sdept <span class="keyword">IN</span></span><br><span class="line">    ( <span class="keyword">SELECT</span> Sdept <span class="keyword">FROM</span> Student</span><br><span class="line">      <span class="keyword">WHERE</span> Sname <span class="operator">=</span> ‘刘晨’ )</span><br><span class="line">      <span class="keyword">AND</span> Sname <span class="operator">!=</span> ‘刘晨’ </span><br></pre></td></tr></table></figure>
<p>例47. 查询选修了“数据库基础”课程的学生的学号、姓名。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sno, Sname <span class="keyword">FROM</span> Student</span><br><span class="line">  <span class="keyword">WHERE</span> Sno <span class="keyword">IN</span></span><br><span class="line">    ( <span class="keyword">SELECT</span> Sno <span class="keyword">FROM</span> SC</span><br><span class="line">      <span class="keyword">WHERE</span> Cno <span class="keyword">IN</span></span><br><span class="line">      ( <span class="keyword">SELECT</span> Cno <span class="keyword">FROM</span> Course</span><br><span class="line">        <span class="keyword">WHERE</span> Cname <span class="operator">=</span> <span class="string">&#x27;数据库基础&#x27;</span>) ) </span><br></pre></td></tr></table></figure></li>
<li><p><strong>使用子查询进行比较测试</strong></p>
<ul>
<li>带比较运算符的子查询指父查询与子查询之间用比较运算符连接，</li>
<li>当用户能确切知道内层查询返回的是单值时，可用&gt;、&lt;、&#x3D;、&gt;&#x3D;、&lt;&#x3D;、&lt;&gt;运算符。<br>例48. 查询修了‘c02’课程且成绩高于此课程的平均成绩的学生的学号和成绩。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sno , Grade <span class="keyword">FROM</span> SC</span><br><span class="line">   <span class="keyword">WHERE</span> Cno <span class="operator">=</span> `c02`</span><br><span class="line">   <span class="keyword">and</span> Grade <span class="operator">&gt;</span> (</span><br><span class="line">     <span class="keyword">SELECT</span> <span class="built_in">AVG</span>(Grade) <span class="keyword">from</span> SC </span><br><span class="line">        <span class="keyword">WHERE</span> Cno <span class="operator">=</span> <span class="string">&#x27;c02&#x27;</span>) </span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>使用子查询进行存在性测试</strong></p>
<ul>
<li>一般使用EXISTS谓词。</li>
<li><strong>带EXISTS谓词的子查询不返回查询的数据，只产生逻辑真值（有数据）和假值（没有数据）。</strong><br>例49.查询选修了‘c01’号课程的学生姓名。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname <span class="keyword">FROM</span> Student </span><br><span class="line">  <span class="keyword">WHERE</span> <span class="keyword">EXISTS</span></span><br><span class="line">    (<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> SC</span><br><span class="line">      <span class="keyword">WHERE</span> Sno <span class="operator">=</span> Student.Sno              </span><br><span class="line">      <span class="keyword">AND</span> Cno <span class="operator">=</span> <span class="string">&#x27;c01&#x27;</span>) </span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注1：</strong>处理过程为：先外后内；由外层的值决定内层的结果；内层执行次数由外层结果数决定。<br><strong>注2：</strong>由于EXISTS的子查询只能返回真或假值，因此在这里给出列名无意义。所以在有EXISTS的子查询中，其目标列表达式通常都用*。</p>
</blockquote>
</li>
</ul>
</li>
<li><p><strong>上句的处理过程</strong></p>
</li>
</ul>
<ol>
<li>找外层表Student表的第一行，根据其Sno值处理内层查询</li>
<li>由外层的值与内层的结果比较，由此决定外层条件的真、假</li>
<li>顺序处理外层表Student表中的第2、3、…行。<br>例50.查询没有选修‘c01’号课程的学生姓名和所在系。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname, Sdept <span class="keyword">FROM</span> Student </span><br><span class="line">  <span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span></span><br><span class="line">    (<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> SC</span><br><span class="line">      <span class="keyword">WHERE</span> Sno <span class="operator">=</span> Student.Sno </span><br><span class="line">      <span class="keyword">AND</span> Cno <span class="operator">=</span> <span class="string">&#x27;c01&#x27;</span>) </span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="数据更改功能"><a href="#数据更改功能" class="headerlink" title="数据更改功能"></a>数据更改功能</h2><h3 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h3><ul>
<li>插入单行记录的INSERT语句的格式为：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> [(<span class="operator">&lt;</span>列名表<span class="operator">&gt;</span>)] </span><br><span class="line">  <span class="keyword">VALUES</span> （值表）</span><br></pre></td></tr></table></figure></li>
<li><strong>功能：</strong>新增一个符合表结构的数据行，将值表数据按表中列定义顺序[或列名表顺序]赋给对应列名。</li>
<li><strong>注意：</strong>值列表中的值与列名表中的列按位置顺序对应，它们的数据类型必须一致。</li>
<li>如果&lt;表名&gt;后边没有指明列名，则新插入记录的值的顺序必须与表中列的定义顺序一致，且每一个列均有值（可以为空）。</li>
<li><strong>示例</strong><br>例51．将新生记录（95020，陈冬，男，信息系，18岁）插入到Student表中。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Student </span><br><span class="line">    <span class="keyword">VALUES</span> (<span class="string">&#x27;9521105&#x27;</span>, <span class="string">&#x27;陈冬&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="number">18</span>, <span class="string">&#x27;信息系&#x27;</span>)</span><br></pre></td></tr></table></figure>
例52．在SC表中插入一新记录，成绩暂缺。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> SC(Sno, Cno, XKLB) </span><br><span class="line">    <span class="keyword">VALUES</span>(<span class="string">&#x27;9521105&#x27;</span>, <span class="string">&#x27;c01&#x27;</span>, <span class="string">&#x27;必修&#x27;</span>) </span><br></pre></td></tr></table></figure>
实际插入的值为：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="string">&#x27;9521105&#x27;</span>, <span class="string">&#x27;c01&#x27;</span> ，<span class="keyword">NULL</span> ，<span class="string">&#x27;必修&#x27;</span>) </span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="更新数据"><a href="#更新数据" class="headerlink" title="更新数据"></a>更新数据</h3><ul>
<li><p>用UPDATE语句实现。</p>
</li>
<li><p>格式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> </span><br><span class="line">  <span class="keyword">SET</span> <span class="operator">&lt;</span>列名＝表达式<span class="operator">&gt;</span> [,… n]</span><br><span class="line">  [<span class="keyword">WHERE</span> <span class="operator">&lt;</span>更新条件<span class="operator">&gt;</span>]</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>无条件更新</strong><br>例53. 将所有学生的年龄加1。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> Student </span><br><span class="line">  <span class="keyword">SET</span> Sage <span class="operator">=</span> Sage <span class="operator">+</span> <span class="number">1</span></span><br></pre></td></tr></table></figure></li>
<li><p><strong>有条件更新</strong></p>
</li>
</ul>
<ol>
<li>基于本表条件的更新<br>例54. 将‘9512101’学生的年龄改为21岁<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> Student <span class="keyword">SET</span> Sage <span class="operator">=</span> <span class="number">21</span></span><br><span class="line">  <span class="keyword">WHERE</span> Sno <span class="operator">=</span> <span class="string">&#x27;9512101&#x27;</span> </span><br></pre></td></tr></table></figure></li>
</ol>
<ul>
<li><strong>基于其他表条件的更新</strong><br>例55：将计算机系全体学生的成绩加5分。<br>（1）用子查询实现<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> SC <span class="keyword">SET</span> Grade <span class="operator">=</span> Grade <span class="operator">+</span> <span class="number">5</span></span><br><span class="line">  <span class="keyword">WHERE</span> Sno <span class="keyword">IN</span></span><br><span class="line">  (<span class="keyword">SELECT</span> Sno <span class="keyword">FROM</span> Student</span><br><span class="line">    <span class="keyword">WHERE</span> Sdept <span class="operator">=</span> <span class="string">&#x27;计算机系&#x27;</span> )</span><br></pre></td></tr></table></figure>
（2）用多表连接实现<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> SC <span class="keyword">SET</span> Grade <span class="operator">=</span> Grade <span class="operator">+</span> <span class="number">5</span></span><br><span class="line">  <span class="keyword">FROM</span> SC <span class="keyword">JOIN</span> Student <span class="keyword">ON</span> SC.Sno <span class="operator">=</span> Student.Sno</span><br><span class="line">  <span class="keyword">WHERE</span> Sdept <span class="operator">=</span> <span class="string">&#x27;计算机系&#x27;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h3><ul>
<li><p>用DELETE语句实现<br>格式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> [ <span class="keyword">FROM</span> ] <span class="operator">&lt;</span>表名<span class="operator">&gt;</span></span><br><span class="line">  [<span class="keyword">WHERE</span> <span class="operator">&lt;</span>删除条件<span class="operator">&gt;</span> ]</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>无条件删除</strong><br>例56. 删除所有学生的选课记录。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> SC </span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>有条件删除</strong></p>
<ol>
<li>基于本表条件的删除。<br>例57．删除所有不及格学生的修课记录。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> SC </span><br><span class="line">  <span class="keyword">WHERE</span> Grade <span class="operator">&lt;</span> <span class="number">60</span> </span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p><strong>基于其他表条件的删除</strong><br>例58．删除计算机系不及格学生的修课记录。</p>
<ol>
<li><p>用子查询实现</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> SC</span><br><span class="line">  <span class="keyword">WHERE</span> Grade <span class="operator">&lt;</span> <span class="number">60</span> <span class="keyword">AND</span> Sno <span class="keyword">IN</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> Sno <span class="keyword">FROM</span> Student </span><br><span class="line">      <span class="keyword">WHERE</span> Sdept <span class="operator">=</span> ‘计算机系’ )</span><br></pre></td></tr></table></figure>
</li>
<li><p>用多表连接实现</p>
</li>
</ol>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> SC </span><br><span class="line">  <span class="keyword">FROM</span> SC <span class="keyword">JOIN</span> Student <span class="keyword">ON</span> SC.Sno <span class="operator">=</span> Student.Sno</span><br><span class="line">  <span class="keyword">WHERE</span> Sdept <span class="operator">=</span> ‘计算机系’<span class="keyword">AND</span> Grade <span class="operator">&lt;</span> <span class="number">60</span> </span><br></pre></td></tr></table></figure>

<h2 id="建立与删除索引"><a href="#建立与删除索引" class="headerlink" title="建立与删除索引"></a>建立与删除索引</h2><h3 id="索引的概念"><a href="#索引的概念" class="headerlink" title="索引的概念"></a>索引的概念</h3><ul>
<li><strong>索引</strong>主要是<u>为了加快数据的查询速度</u>。</li>
<li>与书籍中的索引或目录类似。<img src="/articles/7de3dde6/索引的概念.png" width=50% height=50% /></li>
<li>索引为性能所带来的好处是<strong>有代价的</strong>，因为索引在数据库中会<u>占用一定的<strong>存储空间</strong></u>。</li>
<li><u>在对数据进行插入、更改和删除操作时，</u>需要对索引进行<u>维护</u>，这需要花费额外的<strong>时间</strong>。</li>
<li>在设计和创建索引时，<strong>应确保对性能的提高程度大于在存储空间和处理资源方面的代价</strong>。</li>
<li>在数据库管理系统中，<strong>数据</strong>是<strong>按数据页存储</strong>的，<strong>索引项</strong>也<strong>按数据页存储</strong>。</li>
<li><u>不同的数据库管理系统的数据页的大小不完全相同</u>，在SQL Server 2000中一个数据页的大小是8 KB。 <img src="/articles/7de3dde6/数据的存储方式.png" width=60% height=60% /></li>
</ul>
<h3 id="索引的分类"><a href="#索引的分类" class="headerlink" title="索引的分类"></a>索引的分类</h3><h4 id="聚簇索引"><a href="#聚簇索引" class="headerlink" title="聚簇索引"></a>聚簇索引</h4><ul>
<li>数据按索引列进行物理排序。</li>
<li>类似于电话号码簿中数据按姓氏排列。</li>
<li>一个表只能包含一个聚簇索引。   </li>
<li>但一个索引可以包含多个列。 <img src="/articles/7de3dde6/聚簇索引.png" width=40% height=40% /></li>
<li>将聚簇索引用于： <ul>
<li>包含大量非重复值的列。</li>
<li>使用：BETWEEN、&gt;、&gt;&#x3D;、&lt; 和 &lt;&#x3D;返回一个范围值的查询。</li>
<li>被连续访问的列。</li>
<li><strong>返回</strong>大型结果集的查询。</li>
<li>经常被用作联接的列，一般来说，这些是外码列。</li>
<li>对 ORDER BY 或 GROUP BY 子句中指定的列进行索引。</li>
</ul>
</li>
<li>聚簇索引不适用于：<ul>
<li>频繁更改的列。因为这将导致整行移动。</li>
<li>字节长的列。因为聚簇索引的键值将被所有非聚簇索引作为查找键使用，并被存储在每个非聚簇索引的B树的叶级索引项中。</li>
</ul>
</li>
</ul>
<h4 id="非聚簇索引"><a href="#非聚簇索引" class="headerlink" title="非聚簇索引"></a>非聚簇索引</h4><ul>
<li><p>数据存储在一个地方，索引存储在另一个地方。</p>
</li>
<li><p>索引带有指向数据的存储位置的指针。</p>
</li>
<li><p>索引中的索引项按索引键值顺序存储，而表中的信息按另一种顺序存储。 </p>
</li>
<li><p>与图书的目录类似。</p>
<img src="/articles/7de3dde6/非聚簇索引.png" width=40% height=40% />
</li>
<li><p>数据行不按非聚簇索引键的顺序排序和存储。</p>
</li>
<li><p>非聚簇索引的叶层不包含数据页。</p>
</li>
<li><p>非聚簇索引B树的叶节点包含索引行。每个索引行包含非聚簇索引键值以及一个或多个行定位器，这些行定位器指向该键值对应的数据行。</p>
</li>
<li><p>可以在有聚簇索引的表和无聚簇索引的表上定义。</p>
</li>
<li><p>SQL Server非聚簇索引中的行定位器有两种形式：</p>
<ol>
<li>如果表没有聚簇索引，则行定位器就是指向行的指针。该指针用文件标识符 (ID)、页码和页上的行数生成。整个指针称为行ID。</li>
<li>如果表有聚簇索引，则行定位器就是行的聚簇索引键值。通过使用聚簇索引键搜索聚簇索引来检索数据行，而聚簇索引键存储在非聚簇索引的叶节点行内。</li>
</ol>
</li>
<li><p>可考虑将非聚簇索引用于： </p>
<ul>
<li>包含大量非重复值的列。</li>
<li><strong>不返回</strong>大型结果集的查询。</li>
<li>经常作为查询条件使用的列。</li>
<li>经常作为连接和分组条件的列。</li>
</ul>
</li>
</ul>
<h4 id="唯一索引"><a href="#唯一索引" class="headerlink" title="唯一索引"></a>唯一索引</h4><ul>
<li>可以确保索引列不包含重复的值。</li>
<li>在多列唯一索引的情况下，该索引可以确保索引列中每个值的组合都是唯一的。</li>
<li>聚簇索引和非聚簇索引都可以是唯一的。只要列中的数据是唯一的，就可以在同一个表上创建一个唯一的聚簇索引和多个唯一的非聚簇索引。</li>
</ul>
<h3 id="创建和删除索引"><a href="#创建和删除索引" class="headerlink" title="创建和删除索引"></a>创建和删除索引</h3><ul>
<li>创建索引：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> </span><br><span class="line">  [ <span class="keyword">UNIQUE</span> ][CLUSTERED<span class="operator">|</span>NONCLUSTERED ]</span><br><span class="line">      INDEX <span class="operator">&lt;</span>索引名<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">ON</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> ( <span class="operator">&lt;</span>列名<span class="operator">&gt;</span>  [, … n ] ）</span><br></pre></td></tr></table></figure></li>
<li>UNIQUE：创建唯一索引。</li>
<li>CLUSTERED：创建聚簇索引。</li>
<li>NONCLUSTERED：创建非聚簇索引。</li>
<li>如果没有指定索引类型，则默认是创建非聚簇索引。 </li>
<li><strong>示例</strong><br>例1．为Student表的Sname列创建非聚簇索引。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> INDEX Sname_ind</span><br><span class="line">   <span class="keyword">ON</span> Stuent ( Sname )</span><br></pre></td></tr></table></figure>
例2．为Student表的Sid列创建唯一的聚簇索引。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">UNIQUE</span> CLUSTERED </span><br><span class="line">   INDEX Sid_ind</span><br><span class="line">   <span class="keyword">ON</span> Stuent (Sid ) </span><br></pre></td></tr></table></figure></li>
<li><strong>删除索引</strong><br>删除索引语句格式：<br><code>DROP INDEX &lt;索引名&gt;</code><br>例3．删除Student表中的Sname_ind索引。<br><code>DROP INDEX Sname_ind</code></li>
</ul>
<h1 id="第6章-实现数据完整性约束"><a href="#第6章-实现数据完整性约束" class="headerlink" title="第6章 实现数据完整性约束"></a>第6章 实现数据完整性约束</h1><h2 id="数据完整性基本概念"><a href="#数据完整性基本概念" class="headerlink" title="数据完整性基本概念"></a>数据完整性基本概念</h2><h2 id="实现声明完整性"><a href="#实现声明完整性" class="headerlink" title="实现声明完整性"></a>实现声明完整性</h2><h2 id="实现过程完整性"><a href="#实现过程完整性" class="headerlink" title="实现过程完整性"></a>实现过程完整性</h2><h1 id="第7章-关系数据库规范化理论"><a href="#第7章-关系数据库规范化理论" class="headerlink" title="第7章 关系数据库规范化理论"></a>第7章 关系数据库规范化理论</h1><h2 id="函数依赖"><a href="#函数依赖" class="headerlink" title="函数依赖"></a>函数依赖</h2><h2 id="关系规范化"><a href="#关系规范化" class="headerlink" title="关系规范化"></a>关系规范化</h2><h3 id="关系模式中的码"><a href="#关系模式中的码" class="headerlink" title="关系模式中的码"></a>关系模式中的码</h3><h3 id="范式"><a href="#范式" class="headerlink" title="范式"></a>范式</h3><blockquote>
<p>数据库的三大范式（3NF）是关系数据库设计中的基本规则，主要用于减少数据冗余、提高数据一致性和完整性。它们分别是第一范式（1NF）、第二范式（2NF）和第三范式（3NF）。</p>
</blockquote>
<h4 id="第一范式（1NF）——确保原子性"><a href="#第一范式（1NF）——确保原子性" class="headerlink" title="第一范式（1NF）——确保原子性"></a>第一范式（1NF）——确保原子性</h4><ul>
<li><p><strong>定义：</strong><br>第一范式（1NF）要求数据表中的所有字段必须具有<strong>原子性（Atomicity）</strong>，<u>即每个字段的值必须是不可再分的最小单位</u>，不能存储多个值。</p>
</li>
<li><p><strong>要求：</strong></p>
<ol>
<li><strong>每一列只能存储单一值</strong>（即不允许有数组、列表、集合等）。</li>
<li><strong>所有列必须具有相同的数据类型</strong>。</li>
<li><strong>必须有唯一标识（主键）</strong>，确保每一行是唯一的。</li>
</ol>
</li>
<li><p><strong>示例（未满足1NF）：</strong></p>
</li>
</ul>
<table>
<thead>
<tr>
<th>学号</th>
<th>姓名</th>
<th>课程</th>
</tr>
</thead>
<tbody><tr>
<td>1001</td>
<td>张三</td>
<td>数学, 物理</td>
</tr>
<tr>
<td>1002</td>
<td>李四</td>
<td>英语, 计算机</td>
</tr>
</tbody></table>
<blockquote>
<p>上表中，”课程” 列存储了多个值（数学、物理），<strong>不满足1NF</strong>。</p>
</blockquote>
<ul>
<li><strong>修改后（满足1NF）：</strong></li>
</ul>
<table>
<thead>
<tr>
<th>学号</th>
<th>姓名</th>
<th>课程</th>
</tr>
</thead>
<tbody><tr>
<td>1001</td>
<td>张三</td>
<td>数学</td>
</tr>
<tr>
<td>1001</td>
<td>张三</td>
<td>物理</td>
</tr>
<tr>
<td>1002</td>
<td>李四</td>
<td>英语</td>
</tr>
<tr>
<td>1002</td>
<td>李四</td>
<td>计算机</td>
</tr>
</tbody></table>
<blockquote>
<p>现在，每个字段的值都是<strong>不可再分的最小单位</strong>，满足<strong>第一范式（1NF）</strong>。</p>
</blockquote>
<h4 id="第二范式（2NF）——消除部分依赖"><a href="#第二范式（2NF）——消除部分依赖" class="headerlink" title="第二范式（2NF）——消除部分依赖"></a>第二范式（2NF）——消除部分依赖</h4><ul>
<li><p><strong>定义：</strong><br>第二范式（2NF）要求数据库表必须满足1NF，同时<strong>消除非主键列对主键的部分依赖</strong>（Partial Dependency）。</p>
</li>
<li><p>要求：</p>
<ol>
<li>先满足1NF。</li>
<li>所有非主键字段必须完全依赖于主键，而不能只依赖于主键的一部分。</li>
</ol>
</li>
<li><p><strong>示例（未满足2NF）：</strong><br>假设一个课程成绩表：</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>学号</th>
<th>课程</th>
<th>课程名称</th>
<th>分数</th>
</tr>
</thead>
<tbody><tr>
<td>1001</td>
<td>MATH</td>
<td>高等数学</td>
<td>90</td>
</tr>
<tr>
<td>1001</td>
<td>CS</td>
<td>C语言</td>
<td>85</td>
</tr>
<tr>
<td>1002</td>
<td>MATH</td>
<td>高等数学</td>
<td>88</td>
</tr>
</tbody></table>
<blockquote>
<p>这里，主键是 <strong>（学号，课程）</strong> 的组合，但”课程名称”只依赖于”课程”，而不是整个主键（学号, 课程）。部分依赖导致数据冗余，因为”课程名称”重复存储。</p>
</blockquote>
<ul>
<li><p><strong>修改后（满足2NF）：</strong><br>将数据拆分成两张表：</p>
</li>
<li><p><strong>课程成绩表（满足2NF）：</strong></p>
</li>
</ul>
<table>
<thead>
<tr>
<th>学号</th>
<th>课程</th>
<th>分数</th>
</tr>
</thead>
<tbody><tr>
<td>1001</td>
<td>MATH</td>
<td>90</td>
</tr>
<tr>
<td>1001</td>
<td>CS</td>
<td>85</td>
</tr>
<tr>
<td>1002</td>
<td>MATH</td>
<td>88</td>
</tr>
</tbody></table>
<ul>
<li><strong>课程信息表（满足2NF）：</strong></li>
</ul>
<table>
<thead>
<tr>
<th>课程</th>
<th>课程名称</th>
</tr>
</thead>
<tbody><tr>
<td>MATH</td>
<td>高等数学</td>
</tr>
<tr>
<td>CS</td>
<td>C语言</td>
</tr>
</tbody></table>
<blockquote>
<p>现在，”课程名称” 不再重复存储，解决了部分依赖问题。</p>
</blockquote>
<h4 id="第三范式（3NF）——消除传递依赖"><a href="#第三范式（3NF）——消除传递依赖" class="headerlink" title="第三范式（3NF）——消除传递依赖"></a>第三范式（3NF）——消除传递依赖</h4><ul>
<li><p><strong>定义：</strong><br>第三范式（3NF）要求数据库表必须满足2NF，并<strong>消除非主键字段对主键的传递依赖</strong>（Transitive Dependency）。</p>
</li>
<li><p><strong>要求：</strong></p>
<ol>
<li>先满足2NF。</li>
<li>非主键列必须直接依赖于主键，而不能通过其他非主键列间接依赖主键。</li>
</ol>
</li>
<li><p><strong>示例（未满足3NF）：</strong><br>假设有一张员工表：</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>员工ID</th>
<th>姓名</th>
<th>部门ID</th>
<th>部门名称</th>
</tr>
</thead>
<tbody><tr>
<td>101</td>
<td>张三</td>
<td>D01</td>
<td>财务部</td>
</tr>
<tr>
<td>102</td>
<td>李四</td>
<td>D02</td>
<td>IT部</td>
</tr>
<tr>
<td>103</td>
<td>王五</td>
<td>D01</td>
<td>财务部</td>
</tr>
</tbody></table>
<blockquote>
<p>这里，”部门名称” 依赖于 “部门ID”，而”部门ID” 又依赖于”员工ID”，导致传递依赖，会引发数据冗余和一致性问题。</p>
</blockquote>
<ul>
<li><p><strong>修改后（满足3NF）：</strong><br>拆分成两张表：</p>
</li>
<li><p><strong>员工表（满足3NF）：</strong></p>
</li>
</ul>
<table>
<thead>
<tr>
<th>员工ID</th>
<th>姓名</th>
<th>部门ID</th>
</tr>
</thead>
<tbody><tr>
<td>101</td>
<td>张三</td>
<td>D01</td>
</tr>
<tr>
<td>102</td>
<td>李四</td>
<td>D02</td>
</tr>
<tr>
<td>103</td>
<td>王五</td>
<td>D01</td>
</tr>
</tbody></table>
<ul>
<li><strong>部门表（满足3NF）：</strong></li>
</ul>
<table>
<thead>
<tr>
<th>部门ID</th>
<th>部门名称</th>
</tr>
</thead>
<tbody><tr>
<td>D01</td>
<td>财务部</td>
</tr>
<tr>
<td>D02</td>
<td>IT部</td>
</tr>
</tbody></table>
<blockquote>
<p>现在，”部门名称” 直接依赖于”部门ID”，而不是通过”员工ID” 间接依赖主键，解决了传递依赖问题。</p>
</blockquote>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><table>
<thead>
<tr>
<th>范式</th>
<th>主要目标</th>
<th>关键要求</th>
<th>解决的问题</th>
</tr>
</thead>
<tbody><tr>
<td>1NF</td>
<td>确保数据原子性</td>
<td>每列只能存储单一值</td>
<td>不能有重复值或数组</td>
</tr>
<tr>
<td>2NF</td>
<td>消除部分依赖</td>
<td>非主键列必须完全依赖主键</td>
<td>避免数据冗余，减少更新异常</td>
</tr>
<tr>
<td>3NF</td>
<td>消除传递依赖</td>
<td>非主键列不能依赖于另一个非主键列</td>
<td>避免数据冗余，增强数据一致性</td>
</tr>
</tbody></table>
<blockquote>
<p>这样，数据库的设计就更加规范化、易维护、减少冗余，提高查询效率。</p>
</blockquote>
<h4 id="BCNF"><a href="#BCNF" class="headerlink" title="BCNF"></a>BCNF</h4><blockquote>
<p>在第三范式（3NF）的基础上，还有一个更严格的范式——<strong>巴斯-科德范式（BCNF，Boyce-Codd Normal Form）</strong>。BCNF是3NF的强化版本，进一步减少了数据冗余和异常情况。</p>
</blockquote>
<ul>
<li><strong>任何一个BCNF必然满足：</strong><ol>
<li>所有非主属性都完全函数依赖于每个候选键</li>
<li>所有主属性都完全函数依赖于每个不包含它的候选键</li>
<li>没有任何属性完全函数依赖于非候选键的任何一组属性</li>
</ol>
</li>
</ul>
<h4 id="3NF-与-BCNF-的关系"><a href="#3NF-与-BCNF-的关系" class="headerlink" title="3NF 与 BCNF 的关系"></a><strong>3NF 与 BCNF 的关系</strong></h4><ul>
<li><strong>BCNF 是 3NF 的加强版，满足 BCNF 一定满足 3NF，但满足 3NF 不一定满足 BCNF。</strong></li>
<li><strong>3NF 允许某些非主属性依赖于非主键的候选键，而 BCNF 不允许任何非主属性依赖于非主键。</strong></li>
<li>BCNF 解决了 3NF 可能出现的<strong>候选键的部分依赖</strong>问题。</li>
</ul>
<h2 id="BCNF-示例"><a href="#BCNF-示例" class="headerlink" title="BCNF 示例"></a><strong>BCNF 示例</strong></h2><h3 id="示例（满足3NF，但不满足BCNF）："><a href="#示例（满足3NF，但不满足BCNF）：" class="headerlink" title="示例（满足3NF，但不满足BCNF）："></a><strong>示例（满足3NF，但不满足BCNF）：</strong></h3><table>
<thead>
<tr>
<th>学生ID</th>
<th>课程</th>
<th>教师</th>
</tr>
</thead>
<tbody><tr>
<td>S1</td>
<td>C1</td>
<td>T1</td>
</tr>
<tr>
<td>S2</td>
<td>C2</td>
<td>T2</td>
</tr>
<tr>
<td>S3</td>
<td>C1</td>
<td>T1</td>
</tr>
</tbody></table>
<ul>
<li><p><strong>候选键：</strong>(学生ID, 课程)  </p>
</li>
<li><p><strong>函数依赖关系：</strong>  </p>
<ol>
<li><strong>(学生ID, 课程) → 教师</strong> ✅（主键决定教师）</li>
<li><strong>教师 → 课程</strong> ❌（违反BCNF，因为”教师”不是候选键，但它能决定”课程”）</li>
</ol>
</li>
<li><p><strong>问题：</strong></p>
<ol>
<li><strong>一个教师只能教授一个课程</strong>，但由于”教师”不是候选键，它不应该决定”课程”。</li>
<li>这可能导致数据异常，如如果一个教师更换课程，所有相关记录都要更新。</li>
</ol>
</li>
</ul>
<h3 id="修改后（满足BCNF）："><a href="#修改后（满足BCNF）：" class="headerlink" title="修改后（满足BCNF）："></a><strong>修改后（满足BCNF）：</strong></h3><p>拆分成两张表：</p>
<h4 id="学生-选课表"><a href="#学生-选课表" class="headerlink" title="学生-选课表"></a><strong>学生-选课表</strong></h4><table>
<thead>
<tr>
<th>学生ID</th>
<th>课程</th>
</tr>
</thead>
<tbody><tr>
<td>S1</td>
<td>C1</td>
</tr>
<tr>
<td>S2</td>
<td>C2</td>
</tr>
<tr>
<td>S3</td>
<td>C1</td>
</tr>
</tbody></table>
<h4 id="课程-教师表"><a href="#课程-教师表" class="headerlink" title="课程-教师表"></a><strong>课程-教师表</strong></h4><table>
<thead>
<tr>
<th>课程</th>
<th>教师</th>
</tr>
</thead>
<tbody><tr>
<td>C1</td>
<td>T1</td>
</tr>
<tr>
<td>C2</td>
<td>T2</td>
</tr>
</tbody></table>
<p>现在，<strong>所有的函数依赖的左侧都是候选键</strong>，满足 BCNF。</p>
<h2 id="3NF-与-BCNF-的对比总结"><a href="#3NF-与-BCNF-的对比总结" class="headerlink" title="3NF 与 BCNF 的对比总结"></a><strong>3NF 与 BCNF 的对比总结</strong></h2><table>
<thead>
<tr>
<th></th>
<th><strong>3NF</strong></th>
<th><strong>BCNF</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>要求</strong></td>
<td>所有非主属性必须完全依赖于候选键；允许非主属性依赖于候选键（但不能传递依赖）</td>
<td>所有属性都必须完全依赖于候选键；不允许任何非主属性依赖于非主键</td>
</tr>
<tr>
<td><strong>数据冗余</strong></td>
<td>可能仍然存在一定的数据冗余</td>
<td>更严格地消除冗余</td>
</tr>
<tr>
<td><strong>异常情况</strong></td>
<td>可能仍然存在某些更新异常</td>
<td>彻底消除更新异常</td>
</tr>
<tr>
<td><strong>使用场景</strong></td>
<td>适用于大多数数据库设计</td>
<td>适用于更严格的数据库设计，特别是需要高数据一致性的场景</td>
</tr>
</tbody></table>
<blockquote>
<p>一般情况下，<strong>3NF 已经能满足大多数应用需求</strong>，但如果数据冗余仍然存在，就需要<strong>进一步拆分表，满足 BCNF</strong>。</p>
</blockquote>
<h2 id="关系模式的分解准则"><a href="#关系模式的分解准则" class="headerlink" title="关系模式的分解准则"></a><strong>关系模式的分解准则</strong></h2><p>关系模式的分解应满足以下三个基本准则：</p>
<h3 id="1-无损连接性（Lossless-Join）"><a href="#1-无损连接性（Lossless-Join）" class="headerlink" title="1. 无损连接性（Lossless Join）"></a><strong>1. 无损连接性（Lossless Join）</strong></h3><p><strong>分解后的关系必须能够通过自然连接（natural join）或其他连接操作，</strong>不丢失原始数据，即：  </p>
<blockquote>
<p><strong>R 被分解为 R1 和 R2，必须有 R1 ⨝ R2 &#x3D; R（原始关系）</strong>。</p>
</blockquote>
<p><strong>重要性：</strong>  </p>
<ul>
<li>避免数据丢失，确保可以正确恢复原始关系。  </li>
<li>如果不满足无损连接性，可能导致部分信息丢失，影响查询结果的完整性。</li>
</ul>
<p><strong>无损连接的充要条件（Heath定理）：</strong><br>对于关系模式 <strong>R(A, B, C)</strong> 被分解为 <strong>R1(A, B)</strong> 和 **R2(A, C)**，只要：</p>
<blockquote>
<p><strong>R1 ∩ R2 能够决定其中任意一个关系（即 R1 ∩ R2 → R1 或 R1 ∩ R2 → R2）</strong>，则该分解是无损的。</p>
</blockquote>
<h3 id="2-依赖保持（Dependency-Preservation）"><a href="#2-依赖保持（Dependency-Preservation）" class="headerlink" title="2. 依赖保持（Dependency Preservation）"></a><strong>2. 依赖保持（Dependency Preservation）</strong></h3><p><strong>分解后的关系应能保持原始关系中的所有函数依赖关系</strong>，即：</p>
<blockquote>
<p><strong>R1 和 R2 的联合应该能够表示原始关系 R 的所有函数依赖。</strong></p>
</blockquote>
<p><strong>重要性：</strong>  </p>
<ul>
<li>确保在分解后，不需要进行额外的连接操作来检查数据一致性。  </li>
<li>若不满足该条件，则可能需要跨多个表进行连接查询才能检查某些约束，影响效率。</li>
</ul>
<p><strong>示例（不满足依赖保持）：</strong><br>假设有关系 **R(A, B, C)**，其函数依赖为 <strong>A → B, B → C</strong>，现在分解成：</p>
<ul>
<li><strong>R1(A, B)</strong></li>
<li><strong>R2(B, C)</strong></li>
</ul>
<p>在 <strong>R1 和 R2</strong> 中，我们无法直接在某个表内检查 <strong>A → B, B → C</strong>，必须连接查询，这不满足依赖保持。</p>
<blockquote>
<p><strong>通常，3NF 分解可以保证依赖保持，而 BCNF 分解可能会破坏依赖保持</strong>。</p>
</blockquote>
<h3 id="3-维持数据库的最小冗余（避免数据冗余）"><a href="#3-维持数据库的最小冗余（避免数据冗余）" class="headerlink" title="3. 维持数据库的最小冗余（避免数据冗余）"></a><strong>3. 维持数据库的最小冗余（避免数据冗余）</strong></h3><p><strong>分解后的关系应减少数据冗余，同时避免引入额外的冗余信息</strong>，即：</p>
<blockquote>
<p><strong>避免由于分解导致的重复存储数据，提高存储效率，减少更新异常。</strong></p>
</blockquote>
<p><strong>重要性：</strong>  </p>
<ul>
<li>过多的冗余会导致更新异常（如同一个值需要在多处修改）。  </li>
<li>冗余会浪费存储空间，降低数据库操作的效率。</li>
</ul>
<p><strong>示例（存在冗余）：</strong><br>假设有关系 **R(学号, 课程, 教师)**，其中函数依赖为 <strong>(学号, 课程) → 教师</strong>。<br>如果错误地分解成：</p>
<ul>
<li><strong>R1(学号, 课程)</strong></li>
<li><strong>R2(课程, 教师)</strong></li>
</ul>
<p>那么，如果一个课程由多个学生选修，则在 <strong>R2</strong> 中，同一门课程和教师的组合会被多次存储，增加冗余。</p>
<p>通常，BCNF 分解可以消除冗余，而 3NF 可能仍然存在少量冗余（但可以保持依赖）。</p>
<h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a><strong>总结</strong></h2><table>
<thead>
<tr>
<th><strong>准则</strong></th>
<th><strong>要求</strong></th>
<th><strong>重要性</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>无损连接性</strong></td>
<td>分解后可以通过连接操作恢复原始关系</td>
<td>确保数据不会丢失</td>
</tr>
<tr>
<td><strong>依赖保持</strong></td>
<td>分解后仍能保持原始的所有函数依赖</td>
<td>避免查询时需要额外的连接操作</td>
</tr>
<tr>
<td><strong>最小冗余</strong></td>
<td>避免重复存储数据，减少存储空间占用</td>
<td>提高数据库的存储效率，减少更新异常</td>
</tr>
</tbody></table>
<p>在实际应用中：</p>
<ul>
<li><strong>3NF 分解通常能保证“无损连接性”和“依赖保持”，但可能仍然存在少量冗余。</strong></li>
<li><strong>BCNF 分解可以消除冗余，但可能会破坏依赖保持，需要额外的查询来维护完整性。</strong></li>
</ul>
<p>在数据库设计中，通常需要在这三者之间进行<strong>权衡</strong>，以选择最适合应用需求的范式。</p>
<h1 id="第8章-数据库保护"><a href="#第8章-数据库保护" class="headerlink" title="第8章 数据库保护"></a>第8章 数据库保护</h1><h2 id="事务的基本概念"><a href="#事务的基本概念" class="headerlink" title="事务的基本概念"></a>事务的基本概念</h2><h3 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h3><h3 id="事务的特征"><a href="#事务的特征" class="headerlink" title="事务的特征"></a>事务的特征</h3><h3 id="SQL事务处理模型"><a href="#SQL事务处理模型" class="headerlink" title="SQL事务处理模型"></a>SQL事务处理模型</h3><h2 id="并发控制"><a href="#并发控制" class="headerlink" title="并发控制"></a>并发控制</h2><h3 id="并发控制概述"><a href="#并发控制概述" class="headerlink" title="并发控制概述"></a>并发控制概述</h3><h3 id="并发控制措施"><a href="#并发控制措施" class="headerlink" title="并发控制措施"></a>并发控制措施</h3><ul>
<li>控制目标：事务运行过程中尽可能隔离事务外操作对本事务数据环境的影响。</li>
<li>在数据库环境下，并发控制的主要方式是封锁机制，即加锁（Locking），加锁是一种并行控制技术，是用来调整对共享目标，如DB中共享的记录并行存取的技术。</li>
<li>在数据库管理系统（DBMS）中，<strong>锁（Lock）</strong>用于控制并发访问，防止数据不一致和丢失更新问题。其中，<strong>共享锁（Shared Lock, S 锁）</strong>和<strong>排他锁（Exclusive Lock, X 锁）</strong>是两种最基本的锁机制。<div class="tip warning faa-parent animated-hover"><p class="faa-horizontal"> 在大多数数据库管理系统（如 MySQL、PostgreSQL、SQL Server 等）中：<br>
SELECT 语句默认不会加锁（除非显式使用 FOR SHARE 或 FOR UPDATE）。<br>
UPDATE、DELETE、INSERT 语句都会自动申请排他锁（X 锁）。</p></div></li>
</ul>
<h4 id="1-共享锁（S-锁）"><a href="#1-共享锁（S-锁）" class="headerlink" title="1. 共享锁（S 锁）"></a><strong>1. 共享锁（S 锁）</strong></h4><ul>
<li><p><strong>定义</strong><br>共享锁允许多个事务<strong>同时读取</strong>数据，但<strong>不允许修改数据</strong>。</p>
</li>
<li><p><strong>特性</strong></p>
<ul>
<li><strong>多个事务可以共享同一个数据的共享锁</strong>，因此可以同时执行 <strong>SELECT</strong> 语句，不会互相阻塞。</li>
<li><strong>如果一个事务持有共享锁，其他事务仍然可以申请共享锁</strong>，但不能申请排他锁（X 锁）。</li>
<li><strong>共享锁适用于只读操作</strong>，如 <code>SELECT ... FROM</code> 语句。</li>
</ul>
</li>
<li><p><strong>示例</strong><br>假设有一个<strong>银行账户表</strong>，现在有两个事务：</p>
<ul>
<li><strong>事务 A（读取余额）：</strong></li>
</ul>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">BEGIN</span>;</span><br><span class="line"><span class="keyword">SELECT</span> 余额 <span class="keyword">FROM</span> 账户 <span class="keyword">WHERE</span> 账号 <span class="operator">=</span> <span class="string">&#x27;123456&#x27;</span> <span class="keyword">FOR</span> SHARE;</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>事务 B（读取余额）：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">BEGIN</span>;</span><br><span class="line"><span class="keyword">SELECT</span> 余额 <span class="keyword">FROM</span> 账户 <span class="keyword">WHERE</span> 账号 <span class="operator">=</span> <span class="string">&#x27;123456&#x27;</span> <span class="keyword">FOR</span> SHARE;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>结果：</strong>  </p>
<ul>
<li>事务 A 和 事务 B 都可以同时读取账户余额，因为共享锁允许多个事务同时读取数据。</li>
</ul>
</li>
<li><p><strong>但如果事务 C 想要更新余额（加锁方式为排他锁 X），则会被阻塞：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">BEGIN</span>;</span><br><span class="line"><span class="keyword">UPDATE</span> 账户 <span class="keyword">SET</span> 余额 <span class="operator">=</span> 余额 <span class="operator">-</span> <span class="number">500</span> <span class="keyword">WHERE</span> 账号 <span class="operator">=</span> <span class="string">&#x27;123456&#x27;</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>因为 S 锁阻止了 X 锁的获取，防止数据被修改。</strong></p>
</li>
</ul>
<h4 id="2-排他锁（X-锁）"><a href="#2-排他锁（X-锁）" class="headerlink" title="2. 排他锁（X 锁）"></a><strong>2. 排他锁（X 锁）</strong></h4><ul>
<li><p><strong>定义</strong><br>用于<strong>写操作</strong>。一个事务持有排他锁后，其他事务不能同时持有共享锁或排他锁，从而确保在写操作期间数据不会被其他事务读取或修改。</p>
</li>
<li><p><strong>特性</strong></p>
<ul>
<li><strong>排他锁是独占的</strong>，同一时间只能有一个事务对该数据持有排他锁。</li>
<li><strong>持有排他锁的事务可以读取和修改数据</strong>，其他事务必须等该锁释放后才能访问该数据。</li>
<li><strong>适用于 UPDATE、DELETE、INSERT 等操作</strong>。</li>
</ul>
</li>
<li><p><strong>示例</strong><br>假设有一个<strong>转账事务</strong>：</p>
<ul>
<li><strong>事务 A（转账操作，获取排他锁 X）</strong></li>
</ul>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">BEGIN</span>;</span><br><span class="line"><span class="keyword">UPDATE</span> 账户 <span class="keyword">SET</span> 余额 <span class="operator">=</span> 余额 <span class="operator">-</span> <span class="number">500</span> <span class="keyword">WHERE</span> 账号 <span class="operator">=</span> <span class="string">&#x27;123456&#x27;</span>; <span class="comment">-- 申请 X 锁</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>此时：</strong></p>
<ul>
<li>事务 A 持有排他锁，其他事务（如事务 B）不能再获取<strong>共享锁（S 锁）</strong>或<strong>排他锁（X 锁）</strong>。</li>
</ul>
</li>
<li><p><strong>事务 B（想要读取账户余额，但被阻塞）</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">BEGIN</span>;</span><br><span class="line"><span class="keyword">SELECT</span> 余额 <span class="keyword">FROM</span> 账户 <span class="keyword">WHERE</span> 账号 <span class="operator">=</span> <span class="string">&#x27;123456&#x27;</span> <span class="keyword">FOR</span> SHARE; <span class="comment">-- 被阻塞</span></span><br></pre></td></tr></table></figure>
<p><strong>事务 B 被阻塞，直到事务 A 提交或回滚后，X 锁被释放。</strong></p>
</li>
</ul>
<h4 id="3-共享锁-vs-排他锁-对比"><a href="#3-共享锁-vs-排他锁-对比" class="headerlink" title="3. 共享锁 vs. 排他锁 对比"></a><strong>3. 共享锁 vs. 排他锁 对比</strong></h4><table>
<thead>
<tr>
<th><strong>锁类型</strong></th>
<th><strong>是否允许多个事务同时持有</strong></th>
<th><strong>是否允许读取数据</strong></th>
<th><strong>是否允许修改数据</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>共享锁（S）</strong></td>
<td>是</td>
<td>是</td>
<td>否</td>
</tr>
<tr>
<td><strong>排他锁（X）</strong></td>
<td>否</td>
<td>是</td>
<td>是</td>
</tr>
</tbody></table>
<hr>
<h4 id="4-兼容性（锁冲突情况）"><a href="#4-兼容性（锁冲突情况）" class="headerlink" title="4. 兼容性（锁冲突情况）"></a><strong>4. 兼容性（锁冲突情况）</strong></h4><p>锁的兼容性决定了事务是否可以同时持有锁：</p>
<table>
<thead>
<tr>
<th>事务 B\事务 A</th>
<th><strong>共享锁（S）</strong></th>
<th><strong>排他锁（X）</strong></th>
<th><strong>无锁</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>共享锁（S）</strong></td>
<td>✅（允许）</td>
<td>❌（阻塞）</td>
<td>✅（允许）</td>
</tr>
<tr>
<td><strong>排他锁（X）</strong></td>
<td>❌（阻塞）</td>
<td>❌（阻塞）</td>
<td>✅（允许）</td>
</tr>
<tr>
<td><strong>无锁</strong></td>
<td>✅（允许）</td>
<td>✅（允许）</td>
<td>✅（允许）</td>
</tr>
</tbody></table>
<ul>
<li><strong>S 锁 vs. S 锁</strong> ✅（可以共存）</li>
<li><strong>S 锁 vs. X 锁</strong> ❌（冲突，S 锁必须释放后才能获取 X 锁）</li>
<li><strong>X 锁 vs. X 锁</strong> ❌（冲突，X 锁是独占的）</li>
</ul>
<hr>
<h4 id="5-使用场景"><a href="#5-使用场景" class="headerlink" title="5. 使用场景"></a><strong>5. 使用场景</strong></h4><table>
<thead>
<tr>
<th><strong>操作类型</strong></th>
<th><strong>适用的锁类型</strong></th>
<th><strong>示例 SQL</strong></th>
</tr>
</thead>
<tbody><tr>
<td>只读查询</td>
<td>共享锁（S）</td>
<td><code>SELECT * FROM 账户 WHERE 账号 = &#39;123456&#39; FOR SHARE;</code></td>
</tr>
<tr>
<td>更新数据</td>
<td>排他锁（X）</td>
<td><code>UPDATE 账户 SET 余额 = 余额 - 500 WHERE 账号 = &#39;123456&#39;;</code></td>
</tr>
<tr>
<td>删除数据</td>
<td>排他锁（X）</td>
<td><code>DELETE FROM 账户 WHERE 账号 = &#39;123456&#39;;</code></td>
</tr>
<tr>
<td>事务控制</td>
<td>排他锁（X）</td>
<td><code>SELECT * FROM 账户 WHERE 账号 = &#39;123456&#39; FOR UPDATE;</code></td>
</tr>
</tbody></table>
<h4 id="6-共享锁与排他锁的实际应用"><a href="#6-共享锁与排他锁的实际应用" class="headerlink" title="6. 共享锁与排他锁的实际应用"></a><strong>6. 共享锁与排他锁的实际应用</strong></h4><ul>
<li><strong>示例：银行转账</strong><br>假设 Alice 向 Bob 转账 500 元，涉及两个账户：<ol>
<li>读取 Alice 账户余额（需要 S 锁）</li>
<li>读取 Bob 账户余额（需要 S 锁）</li>
<li>修改 Alice 余额（需要 X 锁）</li>
<li>修改 Bob 余额（需要 X 锁）</li>
</ol>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">BEGIN</span>;</span><br><span class="line"><span class="comment">-- 读取 Alice 余额</span></span><br><span class="line"><span class="keyword">SELECT</span> 余额 <span class="keyword">FROM</span> 账户 <span class="keyword">WHERE</span> 账号 <span class="operator">=</span> <span class="string">&#x27;Alice&#x27;</span> <span class="keyword">FOR</span> SHARE;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 读取 Bob 余额</span></span><br><span class="line"><span class="keyword">SELECT</span> 余额 <span class="keyword">FROM</span> 账户 <span class="keyword">WHERE</span> 账号 <span class="operator">=</span> <span class="string">&#x27;Bob&#x27;</span> <span class="keyword">FOR</span> SHARE;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Alice 扣钱</span></span><br><span class="line"><span class="keyword">UPDATE</span> 账户 <span class="keyword">SET</span> 余额 <span class="operator">=</span> 余额 <span class="operator">-</span> <span class="number">500</span> <span class="keyword">WHERE</span> 账号 <span class="operator">=</span> <span class="string">&#x27;Alice&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Bob 收钱</span></span><br><span class="line"><span class="keyword">UPDATE</span> 账户 <span class="keyword">SET</span> 余额 <span class="operator">=</span> 余额 <span class="operator">+</span> <span class="number">500</span> <span class="keyword">WHERE</span> 账号 <span class="operator">=</span> <span class="string">&#x27;Bob&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br></pre></td></tr></table></figure>
<p>在这个过程中：</p>
<ul>
<li>读取账户余额时，使用 <strong>S 锁</strong>，确保数据不会被其他事务修改。</li>
<li>更新余额时，使用 <strong>X 锁</strong>，确保数据的一致性和防止并发问题。<blockquote>
<p><strong>一致性：</strong>一致性指的是数据库在事务执行前后必须保持数据的完整性和正确性，不允许出现违反约束或逻辑错误的情况。<br><strong>并发问题：</strong>并发问题指的是多个事务同时操作数据库时，可能导致数据不一致或错误的情况。</p>
</blockquote>
</li>
</ul>
<hr>
<h4 id="7-死锁问题"><a href="#7-死锁问题" class="headerlink" title="7. 死锁问题"></a><strong>7. 死锁问题</strong></h4><p>当两个事务各自持有一个锁，并等待对方释放锁时，会出现<strong>死锁（Deadlock）</strong>。</p>
<ul>
<li><strong>示例死锁情况</strong></li>
</ul>
<ol>
<li>事务 A 锁住了行 <strong>Alice</strong>，然后尝试锁定 <strong>Bob</strong>。</li>
<li>事务 B 锁住了行 <strong>Bob</strong>，然后尝试锁定 <strong>Alice</strong>。</li>
<li>由于相互等待，发生死锁。</li>
</ol>
<ul>
<li><strong>解决方案：</strong><ul>
<li><strong>设置超时时间</strong>（<code>LOCK_TIMEOUT</code>）</li>
<li><strong>按顺序申请锁</strong>，避免交叉锁定<blockquote>
<p>按顺序加锁并不是完全避免等待，而是通过确保所有事务按照相同的顺序请求资源，<strong>避免了循环等待</strong>，从而减少了死锁的可能性。这里的关键是避免循环等待条件。</p>
</blockquote>
</li>
<li><strong>数据库自动检测死锁</strong>，强制回滚一个事务</li>
</ul>
</li>
</ul>
<hr>
<h4 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a><strong>总结</strong></h4><ol>
<li><strong>共享锁（S 锁）</strong> 允许多个事务<strong>同时读取</strong>数据，但不允许修改。</li>
<li><strong>排他锁（X 锁）</strong> 允许<strong>读取和修改</strong>数据，但不能共享。</li>
<li><strong>X 锁是独占的</strong>，不能与任何其他锁共存，而 S 锁可以共享。</li>
<li><strong>锁兼容性决定事务是否会被阻塞</strong>，X 锁会阻止所有其他事务访问该数据。</li>
<li><strong>在数据库事务（如银行转账）中，合理使用 S 锁和 X 锁可以防止数据不一致</strong>。</li>
<li><strong>死锁是数据库锁机制中的常见问题</strong>，应使用适当的策略（如超时、顺序加锁）来避免。</li>
</ol>
<h3 id="封锁协议"><a href="#封锁协议" class="headerlink" title="封锁协议"></a>封锁协议</h3><ul>
<li><p><strong>一级封锁协议：</strong>事务在修改数据时加排他锁，直到事务结束才释放。这种协议可以防止丢失修改，但不保证不读脏数据和可重复读。</p>
</li>
<li><p><strong>二级封锁协议：</strong>在一级的基础上，事务在读取数据时加共享锁，但读取完成后立即释放共享锁。这种协议可以防止丢失修改和不读脏数据，但不保证可重复读。</p>
<blockquote>
<p><strong>加共享锁的目的：</strong></p>
</blockquote>
<ol>
<li><strong>防止修改：</strong>当一个事务对某个数据项加共享锁时，其他事务不能对该数据项加排他锁（X锁），从而防止了数据的修改。这确保了在共享锁持有期间，数据不会被其他事务更改。</li>
<li><strong>允许并发读取：</strong>多个事务可以同时对同一数据项加共享锁，这意味着多个事务可以并发读取该数据项，而不会相互阻塞。这提高了系统的并发性能。</li>
</ol>
</li>
<li><p><strong>三级封锁协议：</strong>在二级的基础上，事务在读取数据时加共享锁，并保持到事务结束。这种协议可以防止丢失修改、不读脏数据和保证可重复读。</p>
<img src="/articles/7de3dde6/不同级别的锁协议.png" width=70% height=70% /></li>
</ul>
<h3 id="死锁"><a href="#死锁" class="headerlink" title="死锁"></a>死锁</h3><ul>
<li><strong>预防死锁的方法：</strong><ol>
<li><strong>一次封锁法</strong><br>一次封锁法是每个事务一次将所有要使用的数据全部加锁。</li>
<li><strong>顺序封锁法</strong><br>顺序封锁法是预先对数据对象规定一个封锁顺序，所有事务都按这个顺序封锁。</li>
</ol>
</li>
</ul>
<h3 id="并发调度的可串行性"><a href="#并发调度的可串行性" class="headerlink" title="并发调度的可串行性"></a>并发调度的可串行性</h3><ul>
<li>多个事务的并发执行是正确的，当且仅当其结果与按某一顺序的串行执行的结果相同，则我们称这种调度为<strong>可串行化的调度</strong>。</li>
<li>可串行性是并发事务正确性的准则，按这个准则，一个给定的并发调度，当且仅当它是可串行化的时，才认为是正确的调度。</li>
</ul>
<h3 id="两段锁协议"><a href="#两段锁协议" class="headerlink" title="两段锁协议"></a>两段锁协议</h3><ul>
<li>两段锁协议是实现<strong>可串行化调度</strong>的<strong>充分条件</strong>。</li>
<li>可以将每个事务分成两个时期：<strong>申请封锁期</strong>和<strong>释放封锁期</strong>，申请期申请要进行的封锁，释放期释放所占有的封锁。</li>
<li>在申请期不允许释放任何锁，在释放期不允许申请任何锁，这就是两段式封锁。<img src="/articles/7de3dde6/两段锁协议.png" width=70% height=70% /></li>
</ul>
<h2 id="数据库备份与恢复"><a href="#数据库备份与恢复" class="headerlink" title="数据库备份与恢复"></a>数据库备份与恢复</h2><h3 id="数据库故障的种类"><a href="#数据库故障的种类" class="headerlink" title="数据库故障的种类"></a>数据库故障的种类</h3><h4 id="事务内部的故障"><a href="#事务内部的故障" class="headerlink" title="事务内部的故障"></a>事务内部的故障</h4><ul>
<li>事务故障意味着事务没有达到预期的终点（COMMIT或ROLLBACK），因此，数据库可能处于不正确的状态。</li>
</ul>
<h4 id="系统故障"><a href="#系统故障" class="headerlink" title="系统故障"></a>系统故障</h4><ul>
<li>指造成系统停止运转、系统要重启的故障。例如，硬件错误（CPU故障）、操作系统故障、突然停电等。</li>
</ul>
<h4 id="其它故障"><a href="#其它故障" class="headerlink" title="其它故障"></a>其它故障</h4><ul>
<li>介质故障或由计算机病毒引起的故障或破坏。</li>
</ul>
<h3 id="数据库备份"><a href="#数据库备份" class="headerlink" title="数据库备份"></a>数据库备份</h3><ul>
<li><p>指定期或不定期地对数据库数据进行复制。</p>
</li>
<li><p>可以复制到本地机器上，也可以复制到其它机器上。</p>
</li>
<li><p>备份的介质可以是磁带也可以是磁盘，但通常选用<strong>磁带</strong>。</p>
<blockquote>
<p>现代备份策略通常是混合使用磁带和磁盘，根据数据的重要性、访问频率和恢复需求选择合适的介质。<br>对于需要快速恢复的数据，磁盘是更好的选择；对于长期归档和大规模数据备份，磁带仍然是一个经济高效的选择。</p>
</blockquote>
</li>
<li><p>是保证系统安全的一项重要措施。</p>
</li>
<li><p>在制定备份策略时，应考虑如下几个方面：</p>
<ul>
<li><strong>备份的内容</strong> </li>
<li><strong>备份频率</strong></li>
</ul>
</li>
</ul>
<h3 id="数据库恢复"><a href="#数据库恢复" class="headerlink" title="数据库恢复"></a>数据库恢复</h3><ol>
<li>恢复策略</li>
</ol>
<ul>
<li>事务故障的恢复 </li>
<li>系统故障的恢复 </li>
<li>介质故障的恢复</li>
</ul>
<ol start="2">
<li>恢复方法</li>
</ol>
<ul>
<li>利用备份技术</li>
<li>利用事务日志</li>
<li>利用镜像技术</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="http://lucy23.blog">Lucy</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://lucy23.blog/articles/7de3dde6.html">http://lucy23.blog/articles/7de3dde6.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/articles/c94444f9.html"><img class="prev-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">PPT-考研操作系统</div></div></a></div><div class="next-post pull-right"><a href="/articles/50b60a8e.html"><img class="next-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">考研操作系统</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E7%AB%A0-%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.</span> <span class="toc-text">第三章 关系数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E6%A8%A1%E5%9E%8B%E6%A6%82%E8%BF%B0"><span class="toc-number">1.1.</span> <span class="toc-text">关系模型概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">1.1.1.</span> <span class="toc-text">关系数据结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E6%93%8D%E4%BD%9C"><span class="toc-number">1.1.2.</span> <span class="toc-text">关系操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%A0%E7%BB%9F%E7%9A%84%E5%85%B3%E7%B3%BB%E8%BF%90%E7%AE%97"><span class="toc-number">1.1.2.1.</span> <span class="toc-text">传统的关系运算</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%93%E9%97%A8%E7%9A%84%E5%85%B3%E7%B3%BB%E8%BF%90%E7%AE%97"><span class="toc-number">1.1.2.2.</span> <span class="toc-text">专门的关系运算</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C"><span class="toc-number">1.1.3.</span> <span class="toc-text">关系模型的数据操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%AE%8C%E6%95%B4%E6%80%A7%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.1.4.</span> <span class="toc-text">数据完整性约束</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%9C%AF%E8%AF%AD%E4%B8%8E%E5%BD%A2%E5%BC%8F%E5%8C%96%E5%AE%9A%E4%B9%89"><span class="toc-number">1.2.</span> <span class="toc-text">关系数据模型的基本术语与形式化定义</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%9C%AF%E8%AF%AD"><span class="toc-number">1.2.1.</span> <span class="toc-text">关系数据模型的基本术语</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%8F%8A%E5%85%B6%E5%BD%A2%E5%BC%8F%E5%8C%96%E5%AE%9A%E4%B9%89"><span class="toc-number">1.2.2.</span> <span class="toc-text">关系数据结构及其形式化定义</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E6%A8%A1%E5%9E%8B%E7%9A%84%E5%AE%8C%E6%95%B4%E6%80%A7%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.3.</span> <span class="toc-text">关系模型的完整性约束</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E4%BD%93%E5%AE%8C%E6%95%B4%E6%80%A7"><span class="toc-number">1.3.1.</span> <span class="toc-text">实体完整性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E7%85%A7%E5%AE%8C%E6%95%B4%E6%80%A7"><span class="toc-number">1.3.2.</span> <span class="toc-text">参照完整性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E5%AE%9A%E4%B9%89%E7%9A%84%E5%AE%8C%E6%95%B4%E6%80%A7"><span class="toc-number">1.3.3.</span> <span class="toc-text">用户定义的完整性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E4%BB%A3%E6%95%B0"><span class="toc-number">1.4.</span> <span class="toc-text">关系代数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">1.4.1.</span> <span class="toc-text">关系运算符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%A0%E7%BB%9F%E7%9A%84%E9%9B%86%E5%90%88%E8%BF%90%E7%AE%97"><span class="toc-number">1.4.2.</span> <span class="toc-text">传统的集合运算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%93%E9%97%A8%E7%9A%84%E5%85%B3%E7%B3%BB%E8%BF%90%E7%AE%97-1"><span class="toc-number">1.4.3.</span> <span class="toc-text">专门的关系运算</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%89%E6%8B%A9"><span class="toc-number">1.4.3.1.</span> <span class="toc-text">选择</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8A%95%E5%BD%B1"><span class="toc-number">1.4.3.2.</span> <span class="toc-text">投影</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.4.3.3.</span> <span class="toc-text">连接</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC4%E7%AB%A0-SQL%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80"><span class="toc-number">2.</span> <span class="toc-text">第4章 SQL语言基础</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">2.1.</span> <span class="toc-text">基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL%E8%AF%AD%E8%A8%80%E7%9A%84%E5%8F%91%E5%B1%95"><span class="toc-number">2.1.1.</span> <span class="toc-text">SQL语言的发展</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL%E8%AF%AD%E8%A8%80%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">2.1.2.</span> <span class="toc-text">SQL语言的特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL%E8%AF%AD%E8%A8%80%E5%8A%9F%E8%83%BD%E6%A6%82%E8%BF%B0"><span class="toc-number">2.1.3.</span> <span class="toc-text">SQL语言功能概述</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.2.</span> <span class="toc-text">SQL的数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E5%80%BC%E5%9E%8B"><span class="toc-number">2.2.1.</span> <span class="toc-text">数值型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%9E%8B"><span class="toc-number">2.2.2.</span> <span class="toc-text">字符串型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E7%BC%96%E7%A0%81%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.2.2.1.</span> <span class="toc-text">普通编码字符串类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%9F%E4%B8%80%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.2.2.2.</span> <span class="toc-text">统一字符编码字符串类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.2.2.3.</span> <span class="toc-text">二进制字符串类型</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4%E5%9E%8B"><span class="toc-number">2.2.3.</span> <span class="toc-text">日期时间型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B4%A7%E5%B8%81%E5%9E%8B"><span class="toc-number">2.2.4.</span> <span class="toc-text">货币型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E8%A1%A8%E7%9A%84%E5%AE%9A%E4%B9%89%E3%80%81%E5%88%A0%E9%99%A4%E5%8F%8A%E4%BF%AE%E6%94%B9"><span class="toc-number">2.3.</span> <span class="toc-text">基本表的定义、删除及修改</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E8%A1%A8%E7%9A%84%E5%AE%9A%E4%B9%89%E4%B8%8E%E5%88%A0%E9%99%A4"><span class="toc-number">2.3.1.</span> <span class="toc-text">基本表的定义与删除</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-number">2.3.2.</span> <span class="toc-text">修改表结构</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%E5%8A%9F%E8%83%BD"><span class="toc-number">2.4.</span> <span class="toc-text">数据查询功能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><span class="toc-number">2.4.1.</span> <span class="toc-text">查询语句的基本结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.4.2.</span> <span class="toc-text">简单查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%89%E6%8B%A9%E8%A1%A8%E4%B8%AD%E8%8B%A5%E5%B9%B2%E5%88%97"><span class="toc-number">2.4.2.1.</span> <span class="toc-text">选择表中若干列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%89%E6%8B%A9%E8%A1%A8%E4%B8%AD%E8%8B%A5%E5%B9%B2%E5%85%83%E7%BB%84"><span class="toc-number">2.4.2.2.</span> <span class="toc-text">选择表中若干元组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E8%BF%9B%E8%A1%8C%E6%8E%92%E5%BA%8F"><span class="toc-number">2.4.2.3.</span> <span class="toc-text">对查询结果进行排序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E8%AE%A1%E7%AE%97%E5%87%BD%E6%95%B0%E6%B1%87%E6%80%BB%E6%95%B0%E6%8D%AE"><span class="toc-number">2.4.2.4.</span> <span class="toc-text">使用计算函数汇总数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E8%BF%9B%E8%A1%8C%E5%88%86%E7%BB%84%E8%AE%A1%E7%AE%97"><span class="toc-number">2.4.2.5.</span> <span class="toc-text">对查询结果进行分组计算</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.4.3.</span> <span class="toc-text">多表连接查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">2.4.4.</span> <span class="toc-text">子查询</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%9B%B4%E6%94%B9%E5%8A%9F%E8%83%BD"><span class="toc-number">2.5.</span> <span class="toc-text">数据更改功能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">2.5.1.</span> <span class="toc-text">插入数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE"><span class="toc-number">2.5.2.</span> <span class="toc-text">更新数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="toc-number">2.5.3.</span> <span class="toc-text">删除数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BB%BA%E7%AB%8B%E4%B8%8E%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95"><span class="toc-number">2.6.</span> <span class="toc-text">建立与删除索引</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">2.6.1.</span> <span class="toc-text">索引的概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">2.6.2.</span> <span class="toc-text">索引的分类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%81%9A%E7%B0%87%E7%B4%A2%E5%BC%95"><span class="toc-number">2.6.2.1.</span> <span class="toc-text">聚簇索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%9E%E8%81%9A%E7%B0%87%E7%B4%A2%E5%BC%95"><span class="toc-number">2.6.2.2.</span> <span class="toc-text">非聚簇索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%94%AF%E4%B8%80%E7%B4%A2%E5%BC%95"><span class="toc-number">2.6.2.3.</span> <span class="toc-text">唯一索引</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%92%8C%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95"><span class="toc-number">2.6.3.</span> <span class="toc-text">创建和删除索引</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC6%E7%AB%A0-%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E5%AE%8C%E6%95%B4%E6%80%A7%E7%BA%A6%E6%9D%9F"><span class="toc-number">3.</span> <span class="toc-text">第6章 实现数据完整性约束</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%AE%8C%E6%95%B4%E6%80%A7%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">3.1.</span> <span class="toc-text">数据完整性基本概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E5%A3%B0%E6%98%8E%E5%AE%8C%E6%95%B4%E6%80%A7"><span class="toc-number">3.2.</span> <span class="toc-text">实现声明完整性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E8%BF%87%E7%A8%8B%E5%AE%8C%E6%95%B4%E6%80%A7"><span class="toc-number">3.3.</span> <span class="toc-text">实现过程完整性</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC7%E7%AB%A0-%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A7%84%E8%8C%83%E5%8C%96%E7%90%86%E8%AE%BA"><span class="toc-number">4.</span> <span class="toc-text">第7章 关系数据库规范化理论</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E4%BE%9D%E8%B5%96"><span class="toc-number">4.1.</span> <span class="toc-text">函数依赖</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E8%A7%84%E8%8C%83%E5%8C%96"><span class="toc-number">4.2.</span> <span class="toc-text">关系规范化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E6%A8%A1%E5%BC%8F%E4%B8%AD%E7%9A%84%E7%A0%81"><span class="toc-number">4.2.1.</span> <span class="toc-text">关系模式中的码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8C%83%E5%BC%8F"><span class="toc-number">4.2.2.</span> <span class="toc-text">范式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E8%8C%83%E5%BC%8F%EF%BC%881NF%EF%BC%89%E2%80%94%E2%80%94%E7%A1%AE%E4%BF%9D%E5%8E%9F%E5%AD%90%E6%80%A7"><span class="toc-number">4.2.2.1.</span> <span class="toc-text">第一范式（1NF）——确保原子性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E8%8C%83%E5%BC%8F%EF%BC%882NF%EF%BC%89%E2%80%94%E2%80%94%E6%B6%88%E9%99%A4%E9%83%A8%E5%88%86%E4%BE%9D%E8%B5%96"><span class="toc-number">4.2.2.2.</span> <span class="toc-text">第二范式（2NF）——消除部分依赖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E8%8C%83%E5%BC%8F%EF%BC%883NF%EF%BC%89%E2%80%94%E2%80%94%E6%B6%88%E9%99%A4%E4%BC%A0%E9%80%92%E4%BE%9D%E8%B5%96"><span class="toc-number">4.2.2.3.</span> <span class="toc-text">第三范式（3NF）——消除传递依赖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">4.2.2.4.</span> <span class="toc-text">总结</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#BCNF"><span class="toc-number">4.2.2.5.</span> <span class="toc-text">BCNF</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3NF-%E4%B8%8E-BCNF-%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">4.2.2.6.</span> <span class="toc-text">3NF 与 BCNF 的关系</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#BCNF-%E7%A4%BA%E4%BE%8B"><span class="toc-number">4.3.</span> <span class="toc-text">BCNF 示例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%EF%BC%88%E6%BB%A1%E8%B6%B33NF%EF%BC%8C%E4%BD%86%E4%B8%8D%E6%BB%A1%E8%B6%B3BCNF%EF%BC%89%EF%BC%9A"><span class="toc-number">4.3.1.</span> <span class="toc-text">示例（满足3NF，但不满足BCNF）：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%90%8E%EF%BC%88%E6%BB%A1%E8%B6%B3BCNF%EF%BC%89%EF%BC%9A"><span class="toc-number">4.3.2.</span> <span class="toc-text">修改后（满足BCNF）：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%A6%E7%94%9F-%E9%80%89%E8%AF%BE%E8%A1%A8"><span class="toc-number">4.3.2.1.</span> <span class="toc-text">学生-选课表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%BE%E7%A8%8B-%E6%95%99%E5%B8%88%E8%A1%A8"><span class="toc-number">4.3.2.2.</span> <span class="toc-text">课程-教师表</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3NF-%E4%B8%8E-BCNF-%E7%9A%84%E5%AF%B9%E6%AF%94%E6%80%BB%E7%BB%93"><span class="toc-number">4.4.</span> <span class="toc-text">3NF 与 BCNF 的对比总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%88%86%E8%A7%A3%E5%87%86%E5%88%99"><span class="toc-number">4.5.</span> <span class="toc-text">关系模式的分解准则</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%97%A0%E6%8D%9F%E8%BF%9E%E6%8E%A5%E6%80%A7%EF%BC%88Lossless-Join%EF%BC%89"><span class="toc-number">4.5.1.</span> <span class="toc-text">1. 无损连接性（Lossless Join）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%BE%9D%E8%B5%96%E4%BF%9D%E6%8C%81%EF%BC%88Dependency-Preservation%EF%BC%89"><span class="toc-number">4.5.2.</span> <span class="toc-text">2. 依赖保持（Dependency Preservation）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%BB%B4%E6%8C%81%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E6%9C%80%E5%B0%8F%E5%86%97%E4%BD%99%EF%BC%88%E9%81%BF%E5%85%8D%E6%95%B0%E6%8D%AE%E5%86%97%E4%BD%99%EF%BC%89"><span class="toc-number">4.5.3.</span> <span class="toc-text">3. 维持数据库的最小冗余（避免数据冗余）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-1"><span class="toc-number">4.6.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC8%E7%AB%A0-%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BF%9D%E6%8A%A4"><span class="toc-number">5.</span> <span class="toc-text">第8章 数据库保护</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">5.1.</span> <span class="toc-text">事务的基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1"><span class="toc-number">5.1.1.</span> <span class="toc-text">事务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%9A%84%E7%89%B9%E5%BE%81"><span class="toc-number">5.1.2.</span> <span class="toc-text">事务的特征</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86%E6%A8%A1%E5%9E%8B"><span class="toc-number">5.1.3.</span> <span class="toc-text">SQL事务处理模型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6"><span class="toc-number">5.2.</span> <span class="toc-text">并发控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6%E6%A6%82%E8%BF%B0"><span class="toc-number">5.2.1.</span> <span class="toc-text">并发控制概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6%E6%8E%AA%E6%96%BD"><span class="toc-number">5.2.2.</span> <span class="toc-text">并发控制措施</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%85%B1%E4%BA%AB%E9%94%81%EF%BC%88S-%E9%94%81%EF%BC%89"><span class="toc-number">5.2.2.1.</span> <span class="toc-text">1. 共享锁（S 锁）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%8E%92%E4%BB%96%E9%94%81%EF%BC%88X-%E9%94%81%EF%BC%89"><span class="toc-number">5.2.2.2.</span> <span class="toc-text">2. 排他锁（X 锁）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%85%B1%E4%BA%AB%E9%94%81-vs-%E6%8E%92%E4%BB%96%E9%94%81-%E5%AF%B9%E6%AF%94"><span class="toc-number">5.2.2.3.</span> <span class="toc-text">3. 共享锁 vs. 排他锁 对比</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%85%BC%E5%AE%B9%E6%80%A7%EF%BC%88%E9%94%81%E5%86%B2%E7%AA%81%E6%83%85%E5%86%B5%EF%BC%89"><span class="toc-number">5.2.2.4.</span> <span class="toc-text">4. 兼容性（锁冲突情况）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">5.2.2.5.</span> <span class="toc-text">5. 使用场景</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E5%85%B1%E4%BA%AB%E9%94%81%E4%B8%8E%E6%8E%92%E4%BB%96%E9%94%81%E7%9A%84%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8"><span class="toc-number">5.2.2.6.</span> <span class="toc-text">6. 共享锁与排他锁的实际应用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E6%AD%BB%E9%94%81%E9%97%AE%E9%A2%98"><span class="toc-number">5.2.2.7.</span> <span class="toc-text">7. 死锁问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-2"><span class="toc-number">5.2.2.8.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E9%94%81%E5%8D%8F%E8%AE%AE"><span class="toc-number">5.2.3.</span> <span class="toc-text">封锁协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%BB%E9%94%81"><span class="toc-number">5.2.4.</span> <span class="toc-text">死锁</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%B6%E5%8F%91%E8%B0%83%E5%BA%A6%E7%9A%84%E5%8F%AF%E4%B8%B2%E8%A1%8C%E6%80%A7"><span class="toc-number">5.2.5.</span> <span class="toc-text">并发调度的可串行性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%A4%E6%AE%B5%E9%94%81%E5%8D%8F%E8%AE%AE"><span class="toc-number">5.2.6.</span> <span class="toc-text">两段锁协议</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D"><span class="toc-number">5.3.</span> <span class="toc-text">数据库备份与恢复</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%95%85%E9%9A%9C%E7%9A%84%E7%A7%8D%E7%B1%BB"><span class="toc-number">5.3.1.</span> <span class="toc-text">数据库故障的种类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E5%86%85%E9%83%A8%E7%9A%84%E6%95%85%E9%9A%9C"><span class="toc-number">5.3.1.1.</span> <span class="toc-text">事务内部的故障</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E6%95%85%E9%9A%9C"><span class="toc-number">5.3.1.2.</span> <span class="toc-text">系统故障</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B6%E5%AE%83%E6%95%85%E9%9A%9C"><span class="toc-number">5.3.1.3.</span> <span class="toc-text">其它故障</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD"><span class="toc-number">5.3.2.</span> <span class="toc-text">数据库备份</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%81%A2%E5%A4%8D"><span class="toc-number">5.3.3.</span> <span class="toc-text">数据库恢复</span></a></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-image: url('data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025  <i id="heartbeat" class="fa fas fa-heartbeat"></i> Lucy</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div><link rel="stylesheet" href="https://fastly.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="Chat"><i class="fas fa-sms"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><script defer src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script><script defer data-pjax src="/js/cat.js"></script><script defer src="/js/cursor.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/jquery/3.6.0/jquery.min.js" type="application/javascript"></script><script src="https://cdn.wpon.cn/2022-sucai/Gold-ingot.js"></script><script async data-pjax src="/js/newYear.js"></script><canvas id="universe"></canvas><script src="/js/universe.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="true"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script async src="//at.alicdn.com/t/font_2032782_8d5kxvn09md.js"></script><!-- hexo injector body_end end --></body></html>